<div class="pd w0 h0"><div id="pf5" class="pf" data-page-no="5"><div class="pc pc5"><img class="bi" alt="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABMgAAAYwCAIAAAAI8uQFAAAACXBIWXMAABYlAAAWJQFJUiTwAAAezUlEQVR42uzXMQEAAAjDMMC/580DdyKhXzfJAAAAwNdJAAAAgLEEAADAWAIAAGAsAQAAMJYAAABgLAEAADCWAAAAGEsAAACMJQAAABhLAAAAjCUAAADGEgAAAGMJAAAAxhIAAABjCQAAgLEEAADAWAIAAICxBAAAwFgCAABgLAEAADCWAAAAGEsAAAAwlgAAABhLAAAAjCUAAADGEgAAAIwlAAAAxhIAAABjCQAAgLEEAAAAYwkAAICxBAAAwFgCAABgLAEAAMBYAgAAYCwBAAAwlgAAABhLAAAAjCUAAAAYSwAAAIwlAAAAxhIAAABjCQAAAMYSAAAAYwkAAICxBAAAwFgCAACAsQQAAMBYAgAAYCwBAAAwlgAAAGAsAQAAMJYAAAAYSwAAAIwlAAAAGEsAAACMJQAAAMYSAAAAYwkAAICxBAAAAGMJAACAsQQAAMBYAgAAYCwBAADAWAIAAGAsAQAAMJYAAAAYSwAAADCWAAAAGEsAAACMJQAAAMYSAAAAjCUAAADGEgAAAGMJAACAsQQAAMBYAgAAgLEEAADAWAIAAGAsAQAAMJYAAABgLAEAADCWAAAAGEsAAACMJQAAABhLAAAAjCUAAADGEgAAAGMJAAAAxhIAAABjCQAAgLEEAADAWAIAAGAsAQAAwFgCAABgLAEAADCWAAAAGEsAAAAwlgAAABhLAAAAjCUAAADGEgAAAIwlAAAAxhIAAABjCQAAgLEEAAAAYwkAAICxBAAAwFgCAABgLAEAAMBYAgAAYCwBAAAwlgAAABhLAAAAjCUAAAAYSwAAAIwlAAAAxhIAAABjCQAAAMYSAAAAYwkAAICxBAAAwFgCAACAsQQAAMBYAgAAYCwBAAAwlgAAAGAsAQAAMJYAAAAYSwAAAIwlAAAAxhIAAACMJQAAAMYSAAAAYwkAAICxBAAAAGMJAACAsQQAAMBYAgAAYCwBAADAWAIAAGAsAQAAMJYAAAAYSwAAADCWAAAAGEsAAACMJQAAAMYSAAAAYwkAAADGEgAAAGMJAACAsQQAAMBYAgAAgLEEAADAWAIAAGAsAQAAMJYAAABgLAEAADCWAAAAGEsAAACMJQAAABhLAAAAjCUAAADGEgAAAGMJAAAAxhIAAABjCQAAgLEEAADAWAIAAGAsAQAAwFgCAABgLAEAADCWAAAAGEsAAAAwlgAAABhLAAAAjCUAAADGEgAAAIwlAAAAxhIAAABjCQAAgLEEAAAAYwkAAICxBAAAwFgCAABgLAEAADCWAAAAYCwBAAAwlgAAABhLAAAAjCUAAAAYSwAAAIwlAAAAxhIAAABjCQAAAMYSAAAAYwkAAICxBAAAwFgCAACAsQQAAMBYAgAAYCwBAAAwlgAAABhLAAAAMJYAAAAYSwAAAIwlAAAAxhIAAACMJQAAAMYSAAAAYwkAAICxBAAAAGMJAACAsQQAAMBYAgAAYCwBAADAWAIAAGAsAQAAMJYAAAAYSwAAADCWAAAAGEsAAACMJQAAAMYSAAAAYwkAAADGEgAAAGMJAACAsQQAAMBYAgAAgLEEAADAWAIAAGAsAQAAMJYAAABgLAEAADCWAAAAGEsAAACMJQAAABhLAAAAjCUAAADGEgAAAGMJAACAsQQAAABjCQAAgLEEAADAWAIAAGAsAQAAwFgCAABgLAEAADCWAAAAGEsAAAAwlgAAABhLAAAAjCUAAADGEgAAAIwlAAAAxhIAAABjCQAAgLEEAADAWEoAAACAsQQAAMBYAgAAYCwBAAAwlgAAAGAsAQAAMJYAAAAYSwAAAIwlAAAAGEsAAACMJQAAAMYSAAAAYwkAAADGEgAAAGMJAACAsQQAAMBYAgAAgLEEAADAWAIAAGAsAQAAMJYAAAAYSwAAADCWAAAAGEsAAACMJQAAAMYSAAAAjCUAAADGEgAAAGMJAACAsQQAAABjCQAAgLEEAADAWAIAAGAsAQAAwFgCAABgLAEAADCWAAAAGEsAAACMJQAAABhLAAAAjCUAAADGEgAAAGMJAAAAxhIAAABjCQAAgLEEAADAWAIAAICxBAAAwFgCAABgLAEAADCWAAAAYCwBAAAwlgAAABhLAAAAjCUAAAAYSwAAAIwlAAAAxhIAAABjCQAAgLEEAAAAYwkAAICxBAAAwFgCAABgLAEAAMBYAgAAYCwBAAAwlgAAABhLAAAAMJYAAAAYSwAAAIwlAAAAxhIAAACMJQAAAMYSAAAAYwkAAICxBAAAwFgCAACAsQQAAMBYAgAAYCwBAAAwlgAAAGAsAQAAMJYAAAAYSwAAAIwlAAAAGEsAAACMJQAAAMYSAAAAYwkAAADGEgAAAGMJAACAsQQAAMBYAgAAYCwBAADAWAIAAGAsAQAAMJYAAAAYSwAAADCWAAAAGEsAAACMJQAAAMYSAAAAjCUAAADGEgAAAGMJAACAsQQAAABjCQAAgLEEAADAWAIAAGAsAQAAwFgCAABgLAEAADCWAAAAGEsAAACMJQAAABhLAAAAjCUAAADGEgAAAGMJAAAAxhIAAABjCQAAgLEEAADAWAIAAICxBAAAwFgCAABgLAEAADCWAAAAYCwBAAAwlgAAABhLAAAAjCUAAADGEgAAAIwlAAAAxhIAAABjCQAAgLEEAAAAYwkAAICxBAAAwFgCAABgLAEAAMBYAgAAYCwBAAAwlgAAABhLAAAAMJYAAAAYSwAAAIwlAAAAxhIAAABjCQAAAMYSAAAAYwkAAICxBAAAwFgCAACAsQQAAMBYAgAAYCwBAAAwlgAAAGAsAQAAMJYAAAAYSwAAAIwlAAAAGEsAAACMJQAAAMYSAAAAYwkAAADGEgAAAGMJAACAsQQAAMBYAgAAYCwBAADAWAIAAGAsAQAAMJYAAAAYSwAAADCWAAAAGEsAAACMJQAAAMYSAAAAjCUAAADGEgAAAGMJAACAsQQAAABjCQAAgLEEAADAWAIAAGAsAQAAMJYAAABgLAEAADCWAAAAGEsAAACMJQAAABhLAAAAjCUAAADGEgAAAGMJAAAAxhIAAABjCQAAgLEEAADAWAIAAICxBAAAwFgCAABgLAEAADCWAAAAGEsAAAAwlgAAABhLAAAAjCUAAADGEgAAAIwlAAAAxhIAAABjCQAAgLEEAAAAYwkAAICxBAAAwFgCAABgLAEAAMBYAgAAYCwBAAAwlgAAABhLAAAAMJYAAAAYSwAAAIwlAAAAxhIAAABjCQAAAMYSAAAAYwkAAICxBAAAwFgCAACAsQQAAMBYAgAAYCwBAAAwlgAAAGAsAQAAMJYAAAAYSwAAAIwlAAAAGEsAAACMJQAAAMYSAAAAYwkAAICxBAAAAGMJAACAsQQAAMBYAgAAYCwBAADAWAIAAGAsAQAAMJYAAAAYSwAAADCWAAAAGEsAAACMJQAAAMYSAAAAjCUAAADGEgAAAGMJAACAsQQAAMBYSgAAAICxBAAAwFgCAABgLAEAADCWAAAAYCwBAAAwlgAAABhLAAAAjCUAAAAYSwAAAIwlAAAAxhIAAABjCQAAAMYSAAAAYwkAAICxBAAAwFgCAACAsQQAAMBYAgAAYCwBAAAwlgAAABhLAAAAMJYAAAAYSwAAAIwlAAAAxhIAAACMJQAAAMYSAAAAYwkAAICxBAAAAGMJAACAsQQAAMBYAgAAYCwBAADAWAIAAGAsAQAAMJYAAAAYSwAAAIwlAAAAGEsAAACMJQAAAMYSAAAAYwkAAADGEgAAAGMJAACAsQQAAMBYAgAAgLEEAADAWAIAAGAsAQAAMJYAAABgLAEAADCWAAAAGEsAAACMJQAAABhLAAAAjCUAAADGEgAAAGMJAACAsQQAAABjCQAAgLEEAADAWAIAAGAsAQAAwFgCAABgLAEAADCWAAAAGEsAAAAwlgAAABhLAAAAjCUAAADGEgAAAIwlAAAAxhIAAABjCQAAgLEEAADAWAIAAICxBAAAwFgCAABgLAEAADCWAAAAYCwBAAAwlgAAABhLAAAAjCUAAAAYSwAAAIwlAAAAxhIAAABjCQAAAMYSAAAAYwkAAICxBAAAwFgCAABgLAEAAMBYAgAAYCwBAAAwlgAAABhLAAAAMJYAAAAYSwAAAIwlAAAAxhIAAACMJQAAAMYSAAAAYwkAAICxBAAAAGMJAACAsQQAAMBYAgAAYCwBAADAWAIAAGAsAQAAMJYAAAAYSwAAAIwlAAAAGEsAAACMJQAAAMYSAAAAYwkAAADGEgAAAGMJAACAsQQAAMBYAgAAgLEEAADAWAIAAGAsAQAAMJYAAABgLAEAADCWAAAAGEsAAACMJQAAAMYSAAAAjCUAAADGEgAAAGMJAACAsQQAAABjCQAAgLEEAADAWAIAAGAsAQAAwFgCAABgLAEAADCWAAAAGEsAAAAwlgAAABhLAAAAjCUAAADGEgAAAGMJAAAAxhIAAABjCQAAgLEEAADAWAIAAICxBAAAwFgCAABgLAEAADCWAAAAYCwBAAAwlgAAABhLAAAAjCUAAAAYSwAAAIwlAAAAxhIAAABjCQAAAMYSAAAAYwkAAICxBAAAwFgCAABgLAEAAMBYAgAAYCwBAAAwlgAAABhLAAAAMJYAAAAYSwAAAIwlAAAAxhIAAACMJQAAAMYSAAAAYwkAAICxBAAAAGMJAACAsQQAAMBYAgAAYCwBAAAwlgAAAGAsAQAAMJYAAAAYSwAAAIwlAAAAGEsAAACMJQAAAMYSAAAAYwkAAADGEgAAAGMJAACAsQQAAMBYAgAAgLEEAADAWAIAAGAsAQAAMJYAAAAYSwAAADCWAAAAGEsAAACMJQAAAMYSAAAAjCUAAADGEgAAAGMJAACAsQQAAABjCQAAgLEEAADAWAIAAGAsAQAAwFgCAABgLAEAADCWAAAAGEsAAAAwlgAAABhLAAAAjCUAAADGEgAAAGMJAAAAxhIAAABjCQAAgLEEAADAWAIAAICxBAAAwFgCAABgLAEAADCWAAAAYCwBAAAwlgAAABhLAAAAjCUAAAAYSwAAAIwlAAAAxhIAAABjCQAAgLEEAAAAYwkAAICxBAAAwFgCAABgLAEAAMBYAgAAYCwBAAAwlgAAABhLAAAAMJYAAAAYSwAAAIwlAAAAxhIAAACMJQAAAMYSAAAAYwkAAICxBAAAwFhKAAAAgLEEAADAWAIAAGAsAQAAMJYAAABgLAEAADCWAAAAGEsAAACMJQAAABhLAAAAjCUAAADGEgAAAGMJAAAAxhIAAABjCQAAgLEEAADAWAIAAICxBAAAwFgCAABgLAEAADCWAAAAGEsAAAAwlgAAABhLAAAAjCUAAADGEgAAAIwlAAAAxhIAAABjCQAAgLEEAAAAYwkAAICxBAAAwFgCAABgLAEAAMBYAgAAYCwBAAAwlgAAABhLAAAAjCUAAAAYSwAAAIwlAAAAxhIAAABjCQAAAMYSAAAAYwkAAICxBAAAwFgCAACAsQQAAMBYAgAAYCwBAAAwlgAAAGAsAQAAMJYAAAAYSwAAAIwlAAAAGEsAAACMJQAAAMYSAAAAYwkAAICxBAAAAGMJAACAsQQAAMBYAgAAYCwBAADAWAIAAGAsAQAAMJYAAAAYSwAAADCWAAAAGEsAAACMJQAAAMYSAAAAjCUAAADGEgAAAGMJAACAsQQAAMBYAgAAgLEEAADAWAIAAGAsAQAAMJYAAABgLAEAADCWAAAAGEsAAACMJQAAABhLAAAAjCUAAADGEgAAAGMJAAAAxhIAAABjCQAAgLEEAADAWAIAAGAsAQAAwFgCAABgLAEAADCWAAAAGEsAAAAwlgAAABhLAAAAjCUAAADGEgAAAIwlAAAAxhIAAABjCQAAgLEEAAAAYwkAAICxBAAAwFgCAABgLAEAAMBYAgAAYCwBAAAwlgAAABhLAAAAjCUAAAAYSwAAAIwlAAAAxhIAAABjCQAAAMYSAAAAYwkAAICxBAAAwFgCAACAsQQAAMBYAgAAYCwBAAAwlgAAAGAsAQAAMJYAAAAYSwAAAIwlAAAAxhIAAACMJQAAAMYSAAAAYwkAAICxBAAAAGMJAACAsQQAAMBYAgAAYCwBAADAWAIAAGAsAQAAMJYAAAAYSwAAADCWAAAAGEsAAACMJQAAAMYSAAAAYwkAAADGEgAAAGMJAACAsQQAAMBYAgAAgLEEAADAWAIAAGAsAQAAMJYAAABgLAEAADCWAAAAGEsAAACMJQAAABhLAAAAjCUAAADGEgAAAGMJAAAAxhIAAABjCQAAgLEEAADAWAIAAGAsAQAAwFgCAABgLAEAADCWAAAAGEsAAAAwlgAAABhLAAAAjCUAAADGEgAAAIwlAAAAxhIAAABjCQAAgLEEAAAAYwkAAICxBAAAwFgCAABgLAEAADCWAAAAYCwBAAAwlgAAABhLAAAAjCUAAAAYSwAAAIwlAAAAxhIAAABjCQAAAMYSAAAAYwkAAICxBAAAwFgCAACAsQQAAMBYAgAAYCwBAAAwlgAAABhLAAAAMJYAAAAYSwAAAIwlAAAAxhIAAACMJQAAAMYSAAAAYwkAAICxBAAAAGMJAACAsQQAAMBYAgAAYCwBAADAWAIAAGAsAQAAMJYAAAAYSwAAADCWAAAAGEsAAACMJQAAAMYSAAAAYwkAAADGEgAAAGMJAACAsQQAAMBYAgAAgLEEAADAWAIAAGAsAQAAMJYAAABgLAEAADCWAAAAGEsAAACMJQAAABhLAAAAjCUAAADGEgAAAGMJAACAsQQAAABjCQAAgLEEAADAWAIAAGAsAQAAwFgCAABgLAEAADCWAAAAGEsAAAAwlgAAABhLAAAAjCUAAADGEgAAAIwlAAAAxhIAAABjCQAAgLEEAADAWEoAAACAsQQAAMBYAgAAYCwBAAAwlgAAAGAsAQAAMJYAAAAYSwAAAIwlAAAAGEsAAACMJQAAAMYSAAAAYwkAAADGEgAAAGMJAACAsQQAAMBYAgAAgLEEAADAWAIAAGAsAQAAMJYAAAAYSwAAADCWAAAAGEsAAACMJQAAAMYSAAAAjCUAAADGEgAAAGMJAACAsQQAAABjCQAAgLEEAADAWAIAAGAsAQAAwFgCAABgLAEAADCWAAAAGEsAAACMJQAAABhLAAAAjCUAAADGEgAAAGMJAAAAxhIAAABjCQAAgLEEAADAWAIAAICxBAAAwFgCAABgLAEAADCWAAAAYCwBAAAwlgAAABhLAAAAjCUAAAAYSwAAAIwlAAAAxhIAAABjCQAAgLEEAAAAYwkAAICxBAAAwFgCAABgLAEAAMBYAgAAYCwBAAAwlgAAABhLAAAAMJYAAAAYSwAAAIwlAAAAxhIAAACMJQAAAMYSAAAAYwkAAICxBAAAwFgCAACAsQQAAMBYAgAAYCwBAAAwlgAAAGAsAQAAMJYAAAAYSwAAAIwlAAAAGEsAAACMJQAAAMYSAAAAYwkAAADGEgAAAGMJAACAsQQAAMBYAgAAYCwBAADAWAIAAGAsAQAAMJYAAAAYSwAAADCWAAAAGEsAAACMJQAAAMYSAAAAjCUAAADGEgAAAGMJAACAsQQAAABjCQAAgLEEAADAWAIAAGAsAQAAwFgCAABgLAEAADCWAAAAGEsAAACMJQAAABhLAAAAjCUAAADGEqDt2sEJACAQA0EC9t9y7ECQeykzJeR1CwcAgLAEAAAAYQkAAICwBAAAQFgCAAAgLAEAAEBYAgAAICwBAAAQlgAAAAhLAAAAEJYAAAAISwAAAIQlAAAAwhIAAABhCQAAAMISAAAAYQkAAICwBAAAQFgCAACAsAQAAEBYAgAAICwBAAAQlgAAACAsAQAAEJYAAAAISwAAAIQlAAAACEsAAACEJQAAAMISAAAAYQkAAICwBAAAAGEJAACAsAQAAEBYAgAAICwBAABAWAIAACAsAQAAEJYAAAAISwAAABCWAAAACEsAAACEJQAAAMISAAAAhCUAAADCEgAAAGEJAACAsAQAAABhCQAAgLAEAABAWAIAACAsAQAAEJYAAAAgLAEAABCWAAAACEsAAACEJQAAAAhLAAAAhCUAAADCEgAAAGEJAAAAwhIAAABhCQAAgLAEAABAWAIAAICwBAAAQFgCAAAgLAEAABCWAAAACEsAAAAQlgAAAAhLAAAAhCUAAADCEgAAAIQlAAAAwhIAAABhCQAAgLAEAAAAYQkAAICwBAAAQFgCAAAgLAEAAEBYAgAAICwBAAAQlgAAAAhLAAAAhCUAAAAISwAAAIQlAAAAwhIAAABhCQAAAMISAAAAYQkAAICwBAAAQFgCAACAsAQAAEBYAgAAICwBAAAQlgAAACAsAQAAEJYAAAAISwAAAIQlAAAACEsAAACEJQAAAMISAAAAYQkAAICwBAAAAGEJAACAsAQAAEBYAgAAICwBAABAWAIAACAsAQAAEJYAAAAISwAAABCWAAAACEsAAACEJQAAAMISAAAAhCUAAADCEgAAAGEJAACAsAQAAEBYAgAAgLAEAABAWAIAACAsAQAAEJYAAAAgLAEAABCWAAAACEsAAACEJQAAAAhLAAAAhCUAAADCEgAAAGEJAAAAwhIAAABhCQAAgLAEAABAWAIAACAsTQAAAICwBAAAQFgCAAAgLAEAABCWAAAAICwBAAAQlgAAAAhLAAAAhCUAAAAISwAAAIQlAAAAwhIAAABhCQAAAMISAAAAYQkAAICwBAAAQFgCAACAsAQAAEBYAgAAICwBAAAQlgAAAAhLAAAAEJYAAAAISwAAAIQlAAAAwhIAAACEJQAAAMISAAAAYQkAAICwBAAAAGEJAACAsAQAAEBYAgAAICwBAABAWAIAACAsAQAAEJYAAAAISwAAAIQlAAAACEsAAACEJQAAAMISAAAAYQkAAADCEgAAAGEJAACAsAQAAEBYAgAAgLAEAABAWAIAACAsAQAAEJYAAAAgLAEAABCWAAAACEsAAACEJQAAAAhLAAAAhCUAAADCEgAAAGEJAACAsAQAAABhCQAAgLAEAABAWAIAACAsAQAAQFgCAAAgLAEAABCWAAAACEsAAAAQlgAAAAhLAAAAhCUAAADCEgAAAIQlAAAAwhIAAABhCQAAgLAEAABAWAIAAICwBAAAQFgCAAAgLAEAABCWAAAAICwBAAAQlgAAAAhLAAAAhCUAAAAISwAAAIQlAAAAwhIAAABhCQAAAMISAAAAYQkAAICwBAAAQFgCAAAgLAEAAEBYAgAAICwBAAAQlgAAAAhLAAAAEJYAAAAISwAAAIQlAAAAwhIAAACOlgnmkhiBP7Q1AgAA103kjgQAAGDCKywAAADCEgAAAGEJAACAsAQAAEBYAgAAgLAEAABAWAIAACAsAQAAEJYAAAAgLAEAABCWAAAACEsAAACEJQAAAAhLAAAAhCUAAADCEgAAAGEJAAAAwhIAAABhCQAAgLAEAABAWAIAACAsAQAAQFgCAAAgLAEAABCWAAAACEsAAAAQlgAAAAhLAAAAhCUAAADCEgAAAIQlAAAAwhIAAABhCQAAgLAEAAAAYQkAAICwBAAAQFgCAAAgLAEAABCWAAAAICwBAAAQlgAAAAhLAAAAhCUAAAAISwAAAIQlAAAAwhIAAABhCQAAAMISAAAAYQkAAICwBAAAQFgCAACAsAQAAEBYAgAAICwBAAAQlgAAACAsAQAAEJYAAAAISwAAAIQlAAAAwhIAAACEJQAAAMISAAAAYQkAAICwBAAAAGEJAACAsAQAAEBYAgAAICwBAABAWAIAACAsAQAAEJYAAAAISwAAABCWAAAACEsAAACEJQAAAMISAAAAYQkAAADCEgAAAGEJAACAsAQAAEBYAgAAgLAEAABAWAIAACAsAQAAEJYAAAAgLAEAABCWAAAACEsAAACEJQAAAAhLAAAAhCUAAADCEgAAAGEJAACAsAQAAABhCQAAgLAEAABAWAIAACAsAQAAQFgCAAAgLAEAABCWAAAACEsAAAAQlgAAAAhLAAAAhCUAAADCEgAAAIQlAAAAwhIAAABhCQAAgLAEAAAAYQkAAICwBAAAQFgCAAAgLAEAABCWAAAAICwBAAAQlgAAAAhLAAAAhCUAAAAISwAAAIQlAAAAwhIAAABhCQAAAMISAAAAYQkAAICwBAAAQFgCAACAsAQAAEBYAgAAICwBAAAQlgAAAAhLAAAAEJYAAAAISwAAAIQlAAAAwhIAAACEJQAAAMISAAAAYQkAAICwBAAAAGEJAACAsAQAAEBYAgAAICwBAABAWAIAACAsAQAAEJYAAAAISwAAAIQlAAAACEsAAACEJQAAAMISAAAAYQkAAADCEgAAAGEJAACAsAQAAEBYAgAAgLAEAABAWAIAACAsAQAAEJYAAAAgLAEAABCWAAAACEsAAACEJQAAAAhLAAAAhCUAAADCEgAAAGEJAACAsAQAAABhCQAAgLAEAABAWAIAACAsAQAAQFgCAAAgLAEAABCWAAAACEsAAAAQlgAAAAhLAAAAhCUAAADCEgAAAIQlAAAAwhIAAABhCQAAgLAEAABAWAIAAICwBAAAQFgCAADwnA1YqBVbC4wuZAAAAABJRU5ErkJggg=="/><div class="t m0 xd h3 y53 ff2 fs3 fc0 sc0 ls0 wsa">resentations are assigned an<span class="_ _7"> </span>integer ke<span class="_ _1"></span>y called the <span class="ffa">object<span class="_ _7"> </span>shape</span>.</div><div class="t m0 xd h3 y54 ff2 fs3 fc0 sc0 ls0 ws4">Thus, the guard is a simple equality check on the object shape.</div><div class="t m0 x11 h3 y55 ff1 fs3 fc0 sc0 ls0 ws10">Representation<span class="_ _a"> </span>specialization:<span class="_ _b"> </span>numbers. <span class="ff2">Jav<span class="_ _1"></span>aScript has<span class="_ _a"> </span>no</span></div><div class="t m0 xd h3 y56 ff2 fs3 fc0 sc0 ls0 ws8">integer type, only a Number type that is<span class="_ _7"> </span>the set of 64-bit IEEE-</div><div class="t m0 xd h3 y57 ff2 fs3 fc0 sc0 ls0 ws1b">754 ﬂoating-pointer numbers (“doubles”). But many Ja<span class="_ _1"></span>v<span class="_ _1"></span>aScript</div><div class="t m0 xd h3 y58 ff2 fs3 fc0 sc0 ls0 ws6">operators, in<span class="_ _3"> </span>particular array accesses and<span class="_ _3"> </span>bitwise operators, really</div><div class="t m0 xd h3 y59 ff2 fs3 fc0 sc0 ls0 ws2">operate on inte<span class="_ _1"></span>gers, so the<span class="_ _1"></span>y ﬁrst con<span class="_ _1"></span>v<span class="_ _1"></span>ert<span class="_ _5"> </span>the number to an integer<span class="_ _1"></span>,</div><div class="t m0 xd h5 y5a ff2 fs3 fc0 sc0 ls0 ws8">and then con<span class="_ _1"></span>v<span class="_ _1"></span>ert any inte<span class="_ _1"></span>ger result back to a double.<span class="fs4 lsc v1">1</span>Clearly<span class="_ _4"></span>, a</div><div class="t m0 xd h3 y5b ff2 fs3 fc0 sc0 ls0 ws2">Jav<span class="_ _1"></span>aScript<span class="_ _5"> </span>VM that<span class="_ _5"> </span>wants to<span class="_ _5"> </span>be fast<span class="_ _5"> </span>must ﬁnd<span class="_ _6"> </span>a w<span class="_ _1"></span>ay<span class="_ _6"> </span>to operate<span class="_ _5"> </span>on</div><div class="t m0 xd h3 y5c ff2 fs3 fc0 sc0 ls0 ws4">integers directly and a<span class="_ _1"></span>void these con<span class="_ _1"></span>v<span class="_ _1"></span>ersions.</div><div class="t m0 x11 h3 y5d ff2 fs3 fc0 sc0 ls0 ws5">In T<span class="_ _1"></span>raceMonk<span class="_ _1"></span>ey<span class="_ _4"></span>, we support<span class="_ _6"> </span>two representations<span class="_ _6"> </span>for numbers:</div><div class="t m0 xd h3 y5e ff2 fs3 fc0 sc0 ls0 ws8">integers<span class="_ _7"> </span>and<span class="_ _7"> </span>doubles.<span class="_ _7"> </span>The interpreter<span class="_ _7"> </span>uses<span class="_ _7"> </span>inte<span class="_ _1"></span>ger representations</div><div class="t m0 xd h3 y5f ff2 fs3 fc0 sc0 ls0 ws4">as much<span class="_ _3"> </span>as<span class="_ _3"> </span>it<span class="_ _3"> </span>can, switching<span class="_ _3"> </span>for<span class="_ _3"> </span>results<span class="_ _3"> </span>that can<span class="_ _3"> </span>only<span class="_ _3"> </span>be<span class="_ _3"> </span>represented</div><div class="t m0 xd h3 y60 ff2 fs3 fc0 sc0 ls0 ws2">as doubles.<span class="_ _6"> </span>When a<span class="_ _6"> </span>trace is started,<span class="_ _5"> </span>some values<span class="_ _5"> </span>may be imported</div><div class="t m0 xd h3 y61 ff2 fs3 fc0 sc0 ls0 ws8">and represented as inte<span class="_ _1"></span>gers. Some operations on<span class="_ _7"> </span>integers require</div><div class="t m0 xd h3 y62 ff2 fs3 fc0 sc0 ls0 ws2">guards. F<span class="_ _1"></span>or example,<span class="_ _5"> </span>adding two inte<span class="_ _1"></span>gers can<span class="_ _6"> </span>produce a v<span class="_ _1"></span>alue<span class="_ _5"> </span>too</div><div class="t m0 xd h3 y63 ff2 fs3 fc0 sc0 ls0 ws4">large for the inte<span class="_ _1"></span>ger representation.</div><div class="t m0 x11 h3 y64 ff1 fs3 fc0 sc0 ls0 ws12">Function inlining. <span class="ff2">LIR traces can cross function boundaries</span></div><div class="t m0 xd h3 y65 ff2 fs3 fc0 sc0 ls0 ws5">in either direction, achie<span class="_ _1"></span>ving function inlining. Mo<span class="_ _1"></span>ve instructions</div><div class="t m0 xd h3 y66 ff2 fs3 fc0 sc0 ls0 ws2">need to be<span class="_ _5"> </span>recorded for function entry<span class="_ _5"> </span>and exit to<span class="_ _6"> </span>copy ar<span class="_ _1"></span>guments</div><div class="t m0 xd h3 y67 ff2 fs3 fc0 sc0 ls0 ws4">in and<span class="_ _3"> </span>return<span class="_ _3"> </span>v<span class="_ _1"></span>alues out<span class="_ _1"></span>. These<span class="_ _3"> </span>mo<span class="_ _1"></span>ve<span class="_ _3"> </span>statements<span class="_ _3"> </span>are then<span class="_ _3"> </span>optimized</div><div class="t m0 xd h3 y68 ff2 fs3 fc0 sc0 ls0 ws2">away by the compiler<span class="_ _6"> </span>using copy propagation. In order to be able</div><div class="t m0 xd h3 y69 ff2 fs3 fc0 sc0 ls0 ws13">to return to the interpreter<span class="_ _1"></span>,<span class="_ _b"> </span>the trace must also generate LIR to</div><div class="t m0 xd h3 y6a ff2 fs3 fc0 sc0 ls0 wsa">record that a call<span class="_ _7"> </span>frame has been entered and<span class="_ _7"> </span>exited. The frame</div><div class="t m0 xd h3 y6b ff2 fs3 fc0 sc0 ls0 ws10">entry and exit LIR sa<span class="_ _1"></span>ves just<span class="_ _a"> </span>enough<span class="_ _a"> </span>information<span class="_ _a"> </span>to<span class="_ _a"> </span>allo<span class="_ _1"></span>w<span class="_ _a"> </span>the</div><div class="t m0 xd h3 y6c ff2 fs3 fc0 sc0 ls0 ws5">intepreter call stack to be restored<span class="_ _6"> </span>later and is much simpler than</div><div class="t m0 xd h3 y6d ff2 fs3 fc0 sc0 ls0 ws8">the interpreter’<span class="_ _1"></span>s<span class="_ _7"> </span>standard<span class="_ _7"> </span>call code.<span class="_ _7"> </span>If the<span class="_ _7"> </span>function being<span class="_ _7"> </span>entered</div><div class="t m0 xd h3 y6e ff2 fs3 fc0 sc0 ls0 ws5">is not constant<span class="_ _6"> </span>(which in Jav<span class="_ _1"></span>aScript<span class="_ _6"> </span>includes any call by<span class="_ _6"> </span>function</div><div class="t m0 xd h3 y6f ff2 fs3 fc0 sc0 ls0 ws2">name), the recorder must also emit<span class="_ _6"> </span>LIR to guard that the function</div><div class="t m0 xd h3 y70 ff2 fs3 fc0 sc0 ls0 ws4">is the same.</div><div class="t m0 x11 h3 y71 ff1 fs3 fc0 sc0 ls0 ws0">Guards and<span class="_ _a"> </span>side exits.<span class="_ _a"> </span><span class="ff2">Each optimization described<span class="_ _a"> </span>abov<span class="_ _1"></span>e</span></div><div class="t m0 xd h3 y72 ff2 fs3 fc0 sc0 ls0 ws13">requires one or more guards<span class="_ _b"> </span>to verify the<span class="_ _b"> </span>assumptions made in</div><div class="t m0 xd h3 y73 ff2 fs3 fc0 sc0 ls0 ws6">doing the<span class="_ _5"> </span>optimization. A<span class="_ _5"> </span>guard is<span class="_ _3"> </span>just a group of<span class="_ _3"> </span>LIR instructions</div><div class="t m0 xd h3 y74 ff2 fs3 fc0 sc0 ls0 wsa">that performs a test<span class="_ _7"> </span>and conditional exit. The<span class="_ _7"> </span>exit branches to a</div><div class="t m0 xd h3 y75 ffa fs3 fc0 sc0 ls0 ws8">side exit<span class="ff2">, a<span class="_ _7"> </span>small of<span class="_ _1"></span>f-trace piece of LIR that returns a pointer<span class="_ _7"> </span>to</span></div><div class="t m0 xd h3 y76 ff2 fs3 fc0 sc0 ls0 ws13">a structure that describes<span class="_ _b"> </span>the reason for<span class="_ _b"> </span>the exit<span class="_ _b"> </span>along with the</div><div class="t m0 xd h3 y77 ff2 fs3 fc0 sc0 ls0 ws4">interpreter PC at<span class="_ _3"> </span>the exit<span class="_ _3"> </span>point and an<span class="_ _1"></span>y other<span class="_ _3"> </span>data needed to<span class="_ _3"> </span>restore</div><div class="t m0 xd h3 y78 ff2 fs3 fc0 sc0 ls0 ws4">the interpreter’<span class="_ _1"></span>s state structures.</div><div class="t m0 x11 h3 y79 ff1 fs3 fc0 sc0 ls0 ws8">Aborts. <span class="ff2">Some<span class="_ _7"> </span>constructs<span class="_ _7"> </span>are<span class="_ _7"> </span>dif<span class="_ _1"></span>ﬁcult<span class="_ _7"> </span>to<span class="_ _7"> </span>record<span class="_ _7"> </span>in LIR<span class="_ _7"> </span>traces.</span></div><div class="t m0 xd h3 y7a ff2 fs3 fc0 sc0 ls0 ws8">For e<span class="_ _1"></span>xample, <span class="ff7">eval </span>or calls to external functions can change the</div><div class="t m0 xd h3 y7b ff2 fs3 fc0 sc0 ls0 ws1a">program state in unpredictable<span class="_ _b"> </span>ways, making it dif<span class="_ _1"></span>ﬁcult for<span class="_ _b"> </span>the</div><div class="t m0 xd h3 y7c ff2 fs3 fc0 sc0 ls0 ws14">tracer to kno<span class="_ _1"></span>w the current type map in order to continue tracing.</div><div class="t m0 xd h3 y7d ff2 fs3 fc0 sc0 ls0 ws6">A tracing implementation can also ha<span class="_ _1"></span>ve an<span class="_ _1"></span>y number of other limi-</div><div class="t m0 xd h3 y7e ff2 fs3 fc0 sc0 ls0 ws6">tations, e.g.,a small-memory de<span class="_ _1"></span>vice may limit the length of traces.</div><div class="t m0 xd h3 y7f ff2 fs3 fc0 sc0 ls0 ws5">When an<span class="_ _1"></span>y situation<span class="_ _6"> </span>occurs that pre<span class="_ _1"></span>vents<span class="_ _6"> </span>the implementation from</div><div class="t m0 xd h3 y80 ff2 fs3 fc0 sc0 ls0 wsd">continuing trace recording,<span class="_ _3"> </span>the<span class="_ _9"> </span>implementation <span class="ffa">aborts </span>trace record-</div><div class="t m0 xd h3 y117 ff2 fs3 fc0 sc0 ls0 ws4">ing and returns to the trace monitor<span class="_ _1"></span>.</div><div class="t m0 xd ha y129 ff1 fs3 fc0 sc0 ls0 ws4">3.2<span class="_ _8"> </span>T<span class="_ _4"></span>race T<span class="_ _1"></span>r<span class="_ _1"></span>ees</div><div class="t m0 xd h3 y21 ff2 fs3 fc0 sc0 ls0 ws8">Especially simple loops, namely those where control ﬂow<span class="_ _4"></span>, value</div><div class="t m0 xd h3 y12a ff2 fs3 fc0 sc0 ls0 ws4">types, v<span class="_ _1"></span>alue representations, and inlined functions<span class="_ _3"> </span>are all in<span class="_ _1"></span>v<span class="_ _1"></span>ariant,</div><div class="t m0 xd h3 y12b ff2 fs3 fc0 sc0 ls0 ws5">can be<span class="_ _6"> </span>represented by a<span class="_ _6"> </span>single trace. But<span class="_ _6"> </span>most loops ha<span class="_ _1"></span>ve<span class="_ _6"> </span>at least</div><div class="t m0 xd h3 y12c ff2 fs3 fc0 sc0 ls0 ws8">some v<span class="_ _1"></span>ariation, and<span class="_ _7"> </span>so the<span class="_ _7"> </span>program will<span class="_ _7"> </span>take<span class="_ _7"> </span>side e<span class="_ _1"></span>xits from<span class="_ _7"> </span>the</div><div class="t m0 xd h3 y12d ff2 fs3 fc0 sc0 ls0 ws14">main trace. When a side e<span class="_ _1"></span>xit becomes hot, T<span class="_ _1"></span>raceMonk<span class="_ _1"></span>ey starts<span class="_ _7"> </span>a</div><div class="t m0 xd h3 y12e ff2 fs3 fc0 sc0 ls0 ws6">new<span class="_ _3"> </span><span class="ffa">branch<span class="_ _3"> </span>trace </span>from that<span class="_ _3"> </span>point and patches<span class="_ _3"> </span>the side e<span class="_ _1"></span>xit to<span class="_ _3"> </span>jump</div><div class="t m0 xd h3 y12f ff2 fs3 fc0 sc0 ls0 ws4">directly to<span class="_ _3"> </span>that trace.<span class="_ _3"> </span>In this w<span class="_ _1"></span>ay<span class="_ _4"></span>, a single trace<span class="_ _3"> </span>expands<span class="_ _3"> </span>on demand</div><div class="t m0 xd h3 y130 ff2 fs3 fc0 sc0 ls0 ws4">to a single-entry<span class="_ _1"></span>,<span class="_ _3"> </span>multiple-exit <span class="ffa">tr<span class="_ _1"></span>ace tr<span class="_ _1"></span>ee<span class="ff2">.</span></span></div><div class="t m0 x11 h3 y131 ff2 fs3 fc0 sc0 ls0 ws2">This section<span class="_ _5"> </span>explains<span class="_ _5"> </span>how trace<span class="_ _5"> </span>trees are<span class="_ _5"> </span>formed during<span class="_ _6"> </span>ex<span class="_ _1"></span>ecu-</div><div class="t m0 xd h3 y132 ff2 fs3 fc0 sc0 ls0 ws6">tion. The goal is<span class="_ _3"> </span>to form trace trees during e<span class="_ _1"></span>xecution that<span class="_ _5"> </span>cov<span class="_ _1"></span>er all</div><div class="t m0 xd h3 y133 ff2 fs3 fc0 sc0 ls0 ws4">the hot paths of the program.</div><div class="t m0 xd he y50 ff2 fs4 fc0 sc0 ls4 ws23">1<span class="fs2 ls0 wsd v3">Arrays<span class="_ _3"> </span>are actually<span class="_ _3"> </span>w<span class="_ _1"></span>orse than this: if the inde<span class="_ _1"></span>x value is<span class="_ _3"> </span>a number<span class="_ _1"></span>,<span class="_ _9"> </span>it must</span></div><div class="t m0 xd hf y2c ff2 fs2 fc0 sc0 ls0 wse">be con<span class="_ _1"></span>verted from a double to a string for the property access operator<span class="_ _1"></span>,<span class="_ _3"> </span>and</div><div class="t m0 xd hf y91 ff2 fs2 fc0 sc0 ls0 ws4">then to<span class="_ _3"> </span>an<span class="_ _3"> </span>inte<span class="_ _1"></span>ger<span class="_ _3"> </span>internally to<span class="_ _3"> </span>the<span class="_ _3"> </span>array<span class="_ _3"> </span>implementation.</div><div class="t m0 x10 h3 y53 ff1 fs3 fc0 sc0 ls0 ws4">Starting a<span class="_ _3"> </span>tree.<span class="_ _3"> </span><span class="ff2">T<span class="_ _1"></span>ree<span class="_ _3"> </span>trees al<span class="_ _1"></span>ways<span class="_ _3"> </span>start at<span class="_ _3"> </span>loop headers,<span class="_ _3"> </span>because</span></div><div class="t m0 xf h3 y54 ff2 fs3 fc0 sc0 ls0 ws4">they<span class="_ _3"> </span>are<span class="_ _3"> </span>a natural<span class="_ _3"> </span>place<span class="_ _3"> </span>to<span class="_ _3"> </span>look for<span class="_ _3"> </span>hot<span class="_ _3"> </span>paths.<span class="_ _3"> </span>In T<span class="_ _1"></span>raceMonk<span class="_ _1"></span>ey<span class="_ _4"></span>, loop</div><div class="t m0 xf h3 y55 ff2 fs3 fc0 sc0 ls0 ws12">headers are easy<span class="_ _b"> </span>to detect–the<span class="_ _b"> </span>bytecode compiler<span class="_ _b"> </span>ensures<span class="_ _b"> </span>that a</div><div class="t m0 xf h3 y56 ff2 fs3 fc0 sc0 ls0 ws2">bytecode is<span class="_ _5"> </span>a loop header if<span class="_ _1"></span>f<span class="_ _5"> </span>it is the tar<span class="_ _1"></span>get<span class="_ _6"> </span>of a<span class="_ _5"> </span>backward branch.</div><div class="t m0 xf h3 y57 ff2 fs3 fc0 sc0 ls0 ws6">T<span class="_ _1"></span>raceMonke<span class="_ _1"></span>y starts a<span class="_ _5"> </span>tree when a<span class="_ _5"> </span>giv<span class="_ _1"></span>en loop<span class="_ _3"> </span>header has been ex<span class="_ _1"></span>e-</div><div class="t m0 xf h3 y58 ff2 fs3 fc0 sc0 ls0 ws6">cuted a certain number of times (2 in the current implementation).</div><div class="t m0 xf h3 y59 ff2 fs3 fc0 sc0 ls0 ws2">Starting a<span class="_ _5"> </span>tree just<span class="_ _6"> </span>means starting<span class="_ _5"> </span>recording a trace<span class="_ _5"> </span>for the<span class="_ _5"> </span>current</div><div class="t m0 xf h3 y5a ff2 fs3 fc0 sc0 ls0 wsd">point and type map and marking the trace as the root of a tree. Each</div><div class="t m0 xf h3 y5b ff2 fs3 fc0 sc0 ls0 ws4">tree is<span class="_ _3"> </span>associated with<span class="_ _3"> </span>a loop<span class="_ _3"> </span>header and<span class="_ _3"> </span>type map,<span class="_ _3"> </span>so there<span class="_ _3"> </span>may be</div><div class="t m0 xf h3 y5c ff2 fs3 fc0 sc0 ls0 ws4">sev<span class="_ _1"></span>eral trees for a gi<span class="_ _1"></span>ven loop header<span class="_ _4"></span>.</div><div class="t m0 x10 h3 y5d ff1 fs3 fc0 sc0 ls0 ws4">Closing the loop. <span class="ff2">T<span class="_ _1"></span>race recording can end in se<span class="_ _1"></span>veral ways.</span></div><div class="t m0 x10 h3 y5e ff2 fs3 fc0 sc0 ls0 ws5">Ideally<span class="_ _1"></span>,<span class="_ _6"> </span>the trace<span class="_ _6"> </span>reaches the loop<span class="_ _6"> </span>header where it<span class="_ _6"> </span>started with</div><div class="t m0 xf h3 y5f ff2 fs3 fc0 sc0 ls0 ws8">the same type map as<span class="_ _7"> </span>on entry<span class="_ _4"></span>. This is called a <span class="ffa">type-stable </span>loop</div><div class="t m0 xf h3 y60 ff2 fs3 fc0 sc0 ls0 ws8">iteration. In this case, the end of the<span class="_ _7"> </span>trace can jump right to the</div><div class="t m0 xf h3 y61 ff2 fs3 fc0 sc0 ls0 ws6">beginning, as<span class="_ _3"> </span>all the value<span class="_ _3"> </span>representations are exactly as<span class="_ _3"> </span>needed to</div><div class="t m0 xf h3 y62 ff2 fs3 fc0 sc0 ls0 ws2">enter the trace.<span class="_ _5"> </span>The jump can e<span class="_ _1"></span>ven<span class="_ _6"> </span>skip the usual<span class="_ _5"> </span>code that would</div><div class="t m0 xf h3 y63 ff2 fs3 fc0 sc0 ls0 ws20">copy out the state at the end of the trace and cop<span class="_ _1"></span>y it back in to the</div><div class="t m0 xf h3 y64 ff2 fs3 fc0 sc0 ls0 ws4">trace activ<span class="_ _1"></span>ation record to enter a trace.</div><div class="t m0 x10 h3 y65 ff2 fs3 fc0 sc0 ls0 ws8">In certain cases the trace might reach the loop header with a</div><div class="t m0 xf h3 y66 ff2 fs3 fc0 sc0 ls0 ws4">different<span class="_ _3"> </span>type map.<span class="_ _3"> </span>This scenario<span class="_ _3"> </span>is sometime<span class="_ _3"> </span>observed<span class="_ _3"> </span>for the ﬁrst</div><div class="t m0 xf h3 y67 ff2 fs3 fc0 sc0 ls0 wsd">iteration of a loop. Some v<span class="_ _1"></span>ariables inside the<span class="_ _3"> </span>loop<span class="_ _3"> </span>might<span class="_ _3"> </span>initially<span class="_ _3"> </span>be</div><div class="t m0 xf h3 y68 ffa fs3 fc0 sc0 ls0 ws1">undeﬁned<span class="ff2 wsd">, before<span class="_ _9"> </span>they are set<span class="_ _9"> </span>to a concrete<span class="_ _9"> </span>type during the ﬁrst<span class="_ _9"> </span>loop</span></div><div class="t m0 xf h3 y69 ff2 fs3 fc0 sc0 ls0 ws12">iteration. When recording such an iteration, the recorder cannot</div><div class="t m0 xf h3 y6a ff2 fs3 fc0 sc0 ls0 ws6">link the trace back to its o<span class="_ _1"></span>wn loop header since it is <span class="ffa ws1">type-unstable</span>.</div><div class="t m0 xf h3 y6b ff2 fs3 fc0 sc0 ls0 ws6">Instead, the iteration<span class="_ _3"> </span>is terminated with a side<span class="_ _3"> </span>exit that will al<span class="_ _1"></span>ways</div><div class="t m0 xf h3 y6c ff2 fs3 fc0 sc0 ls0 ws14">fail and return<span class="_ _7"> </span>to<span class="_ _7"> </span>the<span class="_ _6"> </span>interpreter<span class="_ _1"></span>. At the same<span class="_ _7"> </span>time<span class="_ _7"> </span>a<span class="_ _7"> </span>ne<span class="_ _1"></span>w<span class="_ _7"> </span>trace<span class="_ _6"> </span>is</div><div class="t m0 xf h3 y6d ff2 fs3 fc0 sc0 ls0 ws8">recorded with the ne<span class="_ _1"></span>w type<span class="_ _7"> </span>map. Every<span class="_ _7"> </span>time an additional type-</div><div class="t m0 xf h3 y6e ff2 fs3 fc0 sc0 ls0 ws4">unstable trace<span class="_ _3"> </span>is added to<span class="_ _3"> </span>a re<span class="_ _1"></span>gion, its<span class="_ _3"> </span>exit<span class="_ _3"> </span>type map is<span class="_ _3"> </span>compared to</div><div class="t m0 xf h3 y6f ff2 fs3 fc0 sc0 ls0 ws5">the entry<span class="_ _6"> </span>map of<span class="_ _6"> </span>all existing<span class="_ _6"> </span>traces in<span class="_ _6"> </span>case they<span class="_ _6"> </span>complement each</div><div class="t m0 xf h3 y70 ff2 fs3 fc0 sc0 ls0 ws5">other<span class="_ _1"></span>.<span class="_ _6"> </span>With<span class="_ _6"> </span>this approach we are<span class="_ _6"> </span>able to cov<span class="_ _1"></span>er type-unstable<span class="_ _6"> </span>loop</div><div class="t m0 xf h3 y71 ff2 fs3 fc0 sc0 ls0 ws4">iterations as long they e<span class="_ _1"></span>ventually form a stable equilibrium.</div><div class="t m0 x10 h3 y72 ff2 fs3 fc0 sc0 ls0 ws14">Finally<span class="_ _1"></span>,<span class="_ _6"> </span>the trace might e<span class="_ _1"></span>xit the loop<span class="_ _7"> </span>before<span class="_ _6"> </span>reaching the loop</div><div class="t m0 xf h3 y73 ff2 fs3 fc0 sc0 ls0 ws4">header<span class="_ _1"></span>, for e<span class="_ _1"></span>xample because e<span class="_ _1"></span>xecution<span class="_ _3"> </span>reaches a <span class="ff7">break </span>or<span class="_ _3"> </span><span class="ff7">return</span></div><div class="t m0 xf h3 y74 ff2 fs3 fc0 sc0 ls0 ws2">statement. In this case,<span class="_ _6"> </span>the VM simply ends<span class="_ _6"> </span>the trace with an<span class="_ _6"> </span>exit</div><div class="t m0 xf h3 y75 ff2 fs3 fc0 sc0 ls0 ws4">to the trace monitor<span class="_ _1"></span>.</div><div class="t m0 x10 h3 y76 ff2 fs3 fc0 sc0 ls0 ws8">As mentioned<span class="_ _7"> </span>pre<span class="_ _1"></span>viously<span class="_ _4"></span>, we may<span class="_ _7"> </span>speculati<span class="_ _1"></span>vely<span class="_ _7"> </span>chose<span class="_ _7"> </span>to<span class="_ _7"> </span>rep-</div><div class="t m0 xf h3 y77 ff2 fs3 fc0 sc0 ls0 ws2">resent certain<span class="_ _5"> </span>Number-typed v<span class="_ _1"></span>alues<span class="_ _5"> </span>as integers<span class="_ _5"> </span>on trace. W<span class="_ _4"></span>e do<span class="_ _5"> </span>so</div><div class="t m0 xf h3 y78 ff2 fs3 fc0 sc0 ls0 ws14">when we observ<span class="_ _1"></span>e that Number<span class="_ _1"></span>-typed v<span class="_ _1"></span>ariables contain<span class="_ _7"> </span>an<span class="_ _7"> </span>inte<span class="_ _1"></span>ger</div><div class="t m0 xf h3 y79 ff2 fs3 fc0 sc0 ls0 ws2">value<span class="_ _5"> </span>at trace entry<span class="_ _1"></span>.<span class="_ _5"> </span>If during trace<span class="_ _6"> </span>recording the v<span class="_ _1"></span>ariable<span class="_ _6"> </span>is unex-</div><div class="t m0 xf h3 y7a ff2 fs3 fc0 sc0 ls0 ws5">pectedly assigned a non-inte<span class="_ _1"></span>ger v<span class="_ _1"></span>alue, we ha<span class="_ _1"></span>ve<span class="_ _6"> </span>to widen the type</div><div class="t m0 xf h3 y7b ff2 fs3 fc0 sc0 ls0 ws6">of the<span class="_ _3"> </span>variable<span class="_ _3"> </span>to a double.<span class="_ _3"> </span>As a<span class="_ _5"> </span>result, the<span class="_ _3"> </span>recorded trace<span class="_ _3"> </span>becomes</div><div class="t m0 xf h3 y7c ff2 fs3 fc0 sc0 ls0 ws12">inherently type-unstable since<span class="_ _b"> </span>it starts<span class="_ _b"> </span>with an<span class="_ _b"> </span>inte<span class="_ _1"></span>ger v<span class="_ _1"></span>alue b<span class="_ _1"></span>ut</div><div class="t m0 xf h3 y7d ff2 fs3 fc0 sc0 ls0 ws2">ends with<span class="_ _5"> </span>a double v<span class="_ _1"></span>alue. This<span class="_ _5"> </span>represents a mis-speculation,<span class="_ _5"> </span>since</div><div class="t m0 xf h3 y7e ff2 fs3 fc0 sc0 ls0 ws4">at trace entry we specialized the Number<span class="_ _1"></span>-typed v<span class="_ _1"></span>alue to an inte<span class="_ _1"></span>ger<span class="_ _1"></span>,</div><div class="t m0 xf h3 y7f ff2 fs3 fc0 sc0 ls0 wsd">assuming that at the<span class="_ _3"> </span>loop<span class="_ _9"> </span>edge we would again ﬁnd<span class="_ _3"> </span>an<span class="_ _3"> </span>inte<span class="_ _1"></span>ger v<span class="_ _1"></span>alue</div><div class="t m0 xf h3 y80 ff2 fs3 fc0 sc0 ls0 ws6">in the<span class="_ _3"> </span>variable, allo<span class="_ _1"></span>wing<span class="_ _3"> </span>us to close<span class="_ _3"> </span>the loop. T<span class="_ _4"></span>o a<span class="_ _1"></span>v<span class="_ _1"></span>oid future<span class="_ _3"> </span>spec-</div><div class="t m0 xf h3 y117 ff2 fs3 fc0 sc0 ls0 ws5">ulativ<span class="_ _1"></span>e<span class="_ _6"> </span>failures in<span class="_ _1"></span>v<span class="_ _1"></span>olving this<span class="_ _6"> </span>variable,<span class="_ _6"> </span>and to obtain<span class="_ _6"> </span>a type-stable</div><div class="t m0 xf h3 y118 ff2 fs3 fc0 sc0 ls0 ws4">trace we<span class="_ _3"> </span>note<span class="_ _3"> </span>the f<span class="_ _1"></span>act<span class="_ _3"> </span>that the<span class="_ _3"> </span>v<span class="_ _1"></span>ariable in<span class="_ _3"> </span>question<span class="_ _3"> </span>as<span class="_ _3"> </span>been observ<span class="_ _1"></span>ed</div><div class="t m0 xf h3 y119 ff2 fs3 fc0 sc0 ls0 ws6">to sometimes hold<span class="_ _3"> </span>non-integer values<span class="_ _3"> </span>in an advisory data structure</div><div class="t m0 xf h3 y11a ff2 fs3 fc0 sc0 ls0 ws4">which we call the “oracle”.</div><div class="t m0 x10 h3 y11b ff2 fs3 fc0 sc0 ls0 ws2">When compiling loops,<span class="_ _6"> </span>we consult the oracle<span class="_ _5"> </span>before specializ-</div><div class="t m0 xf h3 y11c ff2 fs3 fc0 sc0 ls0 ws8">ing v<span class="_ _1"></span>alues<span class="_ _7"> </span>to inte<span class="_ _1"></span>gers.<span class="_ _7"> </span>Speculation to<span class="_ _1"></span>wards<span class="_ _7"> </span>inte<span class="_ _1"></span>gers is<span class="_ _7"> </span>performed</div><div class="t m0 xf h3 y11d ff2 fs3 fc0 sc0 ls0 ws8">only if no<span class="_ _7"> </span>adverse<span class="_ _7"> </span>information is<span class="_ _7"> </span>kno<span class="_ _1"></span>wn to the<span class="_ _7"> </span>oracle about<span class="_ _7"> </span>that</div><div class="t m0 xf h3 y11e ff2 fs3 fc0 sc0 ls0 ws2">particular v<span class="_ _1"></span>ariable. Whene<span class="_ _1"></span>ver<span class="_ _6"> </span>we accidentally compile a<span class="_ _5"> </span>loop that</div><div class="t m0 xf h3 y11f ff2 fs3 fc0 sc0 ls0 wsa">is type-unstable due to mis-speculation of a Number<span class="_ _1"></span>-typed v<span class="_ _1"></span>ari-</div><div class="t m0 xf h3 y120 ff2 fs3 fc0 sc0 ls0 ws9">able, we immediately trigger the recording of a new trace, which</div><div class="t m0 xf h3 y121 ff2 fs3 fc0 sc0 ls0 ws6">based on<span class="_ _3"> </span>the now<span class="_ _3"> </span>updated oracle<span class="_ _5"> </span>information will<span class="_ _3"> </span>start with a<span class="_ _3"> </span>dou-</div><div class="t m0 xf h3 y122 ff2 fs3 fc0 sc0 ls0 ws4">ble value and thus become type stable.</div><div class="t m0 x10 h3 y123 ff1 fs3 fc0 sc0 ls0 ws13">Extending a tree. <span class="ff2">Side e<span class="_ _1"></span>xits lead to dif<span class="_ _1"></span>ferent paths through</span></div><div class="t m0 xf h3 y124 ff2 fs3 fc0 sc0 ls0 ws2">the loop, or paths with dif<span class="_ _1"></span>ferent<span class="_ _6"> </span>types or representations. Thus, to</div><div class="t m0 xf h3 y125 ff2 fs3 fc0 sc0 ls0 wsd">completely cov<span class="_ _1"></span>er the loop, the VM must record traces<span class="_ _3"> </span>starting<span class="_ _3"> </span>at<span class="_ _3"> </span>all</div><div class="t m0 xf h3 y126 ff2 fs3 fc0 sc0 ls0 ws6">side exits.<span class="_ _3"> </span>These traces are recorded<span class="_ _5"> </span>much like<span class="_ _3"> </span>root traces: there is</div><div class="t m0 xf h3 y127 ff2 fs3 fc0 sc0 ls0 wsd">a counter for each side e<span class="_ _1"></span>xit, and when the counter reaches<span class="_ _3"> </span>a<span class="_ _3"> </span>hotness</div><div class="t m0 xf h3 y128 ff2 fs3 fc0 sc0 ls0 ws2">threshold, recording<span class="_ _5"> </span>starts. Recording stops<span class="_ _5"> </span>exactly as<span class="_ _5"> </span>for the root</div><div class="t m0 xf h3 y134 ff2 fs3 fc0 sc0 ls0 ws4">trace, using the loop header of the root trace as the target to reach.</div></div><div class="pi" data-data='{"ctm":[1.673203,0.000000,0.000000,1.673203,0.000000,0.000000]}'></div></div></div>

<div class="pd w0 h0"><div id="pf8" class="pf" data-page-no="8"><div class="pc pc8"><img class="bi" alt="" src="data:image/png;base64,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JQAAAMISAAAAYQkAAADCEgAAAGEJAACAsAQAAEBYAgAAgLAEAABAWAIAACAsAQAAEJYAAAAgLAEAABCWAAAACEsAAACEJQAAAMISAAAAhCUAAADCEgAAAGEJAACAsAQAAABhCQAAgLAEAABAWAIAACAsAQAAQFgCAAAgLAEAABCWAAAACEsAAAAQlgAAAAhLAAAAhCUAAADCEgAAAIQlAAAAwhIAAABhCQAAgLAEAABAWAIAAICwBAAAQFgCAAAgLAEAABCWAAAAICwBAAAQlgAAAAhLAAAAhCUAAAAISwAAAIQlAAAAwhIAAABhCQAAAMISAAAAYQkAAICwBAAAQFgCAAAgLAEAAEBYAgAAICwBAAAQlgAAAAhLAAAAEJYAAAAISwAAAIQlAAAAwhIAAACEJQAAAMISAAAAYQkAAICwBAAAAGEJAACAsAQAAEBYAgAAICwBAAAQlgAAACAsAQAAEJYAAAAISwAAAIQlAAAACEsAAACEJQAAAMISAAAAYQkAAADCEgAAAGEJAACAsAQAAEBYAgAAgLAEAABAWAIAACAsAQAAEJYAAAAgLAEAABCWAAAACEsAAACEJQAAAMISAAAAhCUAAADCEgAAAGEJAACAsAQAAABhCQAAgLAEAABAWAIAACAsAQAAQFgCAAAgLAEAABCWAAAACEsAAAAQlgAAAAhLAAAAhCUAAADCEgAAAGEJAAAAwhIAAABhCQAAgLAEAABAWAIAAICwBAAAQFgCAAAgLAEAABCWAAAAICwBAAAQlgAAAAhLAAAAhCUAAAAISwAAAIQlAAAAwhIAAABhCQAAgLAEAAAAYQkAAICwBAAAQFgCAAAgLAEAAEBYAgAAICwBAAAQlgAAAAhLAAAAEJYAAAAISwAAAIQlAAAAwhIAAACEJQAAAMISAAAAYQkAAICwBAAAAGEJAACAsAQAAEBYAgAAICwBAAAQlgAAACAsAQAAEJYAAAAISwAAAIQlAAAACEsAAACEJQAAAMISAAAAYQkAAADCEgAAAGEJAACAsAQAAEBYAgAAgLAEAABAWAIAACAsAQAAEJYAAAAISwAAABCWAAAACEsAAACEJQAAAMISAAAAhCUAAADCEgAAAGEJAACAsAQAAABhCQAAgLAEAABAWAIAACAsAQAAQFgCAAAgLAEAABCWAAAACEsAAACEpQkAAAAQlgAAAAhLAAAAhCUAAADCEgAAAIQlAAAAwhIAAABhCQAAgLAEAAAAYQkAAICwBAAAQFgCAAAgLAEAAEBYAgAAICwBAAAQlgAAAAhLAAAAEJYAAAAISwAAAIQlAAAAwhIAAABhCQAAAMISAAAAYQkAAICwBAAAQFgCAACAsAQAAEBYAgAAICwBAAAQlgAAACAsAQAAEJYAAAAISwAAAIQlAAAACEsAAACEJQAAAMISAAAAYQkAAICwBAAAAGEJAACAsAQAAEBYAgAAICwBAABAWAIAACAsAQAAEJYAAAAISwAAABCWAAAACEsAAACEJQAAAMISAAAAhCUAAADCEgAAAGEJAACAsAQAAABhCQAAgLAEAABAWAIAACAsAQAAEJYAAAAgLAEAABCWAAAACEsAAACEJQAAAAhLAAAAhCUAAADCEgAAAGEJAAAAwhIAAABhCQAAgLAEAABAWAIAAICwBAAAQFgCAAAgLAEAABCWAAAACEsAAAAQlgAAAAhLAAAAhCUAAADCEgAAAIQlAAAAwhIAAABhCQAAgLAEAAAAYQkAAICwBAAAQFgCAAAgLAEAAEBYAgAAICwBAAAQlgAAAAhLAAAAhCUAAAAISwAAAIQlAAAAwhIAAABhCQAAAMISAAAAYQkAAICwBAAAQFgCAACAsAQAAEBYAgAAICwBAAAQlgAAACAsAQAAEJYAAAAISwAAAIQlAAAACEsAAACEJQAAAMISAAAAYQkAAICwBAAAAGEJAACAsAQAAEBYAgAAICwBAABAWAIAACAsAQAAEJYAAAAISwAAABCWAAAACEsAAACEJQAAAMISAAAAhCUAAADCEgAAAGEJAACAsAQAAEBYAgAAgLAEAABAWAIAACAsAQAAEJYAAAAgLAEAABCWAAAACEsAAACEJQAAAAhLAAAAhCUAAADCEgAAAGEJAAAAwhIAAABhCQAAgLAEAABAWAIAACAsAQAAQFgCAAAgLAEAABCWAAAACEsAAAAQlgAAAAhLAAAAhCUAAADCEgAAAIQlAAAAwhIAAABhCQAAgLAEAAAAYQkAAICwBAAAQFgCAAAgLAEAAEBYAgAAICwBAAAQlgAAAAhLAAAAhCUAAAAISwAAAIQlAAAAwhIAAABhCQAAAMISAAAAYQkAAICwBAAAQFgCAACAsAQAAEBYAgAAICwBAAAQlgAAACAsAQAAEJYAAAAISwAAAIQlAAAAwhIAAACEJQAAAMISAAAAYQkAAICwBAAAAGEJAACAsAQAAEBYAgAAICwBAABAWAIAACAsAQAAEJYAAAAISwAAABCWAAAACEsAAACEJQAAAMISAAAAYQkAAADCEgAAAGEJAACAsAQAAEBYAgAAgLAEAABAWAIAACAsAQAAEJYAAAAgLAEAABCWAAAACEsAAACEJQAAAAhLAAAAhCUAAADCEgAAAGEJAAAAwhIAAABhCQAAgLAEAABAWAIAACAsAQAAQFgCAAAgLAEAABCWAAAACEsAAAAQlgAAAAhLAAAAhCUAAADCEgAAAIQlAAAAwhIAAABhCQAAgLAEAAAAYQkAAICwBAAAQFgCAAAgLAEAABCWAAAAICwBAAAQlgAAAAhLAAAAhCUAAAAISwAAAIQlAAAAwhIAAABhCQAAAMISAAAAYQkAAICwBAAAQFgCAACAsAQAAEBYAgAAICwBAAAQlgAAAAhLEwAAACAsAQAAEJYAAAAISwAAAIQlAAAACEsAAACEJQAAAMISAAAAYQkAAADCEgAAAGEJAACAsAQAAEBYAgAAgLAEAABAWAIAACAsAQAAEJYAAAAgLAEAABCWAAAACEsAAACEJQAAAMISAAAAhCUAAADCEgAAAGEJAACAsAQAAABhCQAAgLAEAABAWAIAACAsAQAAQFgCAAAgLAEAABCWAAAACEsAAAAQlgAAAAhLAAAAhCUAAADCEgAAAGEJAAAAwhIAAABhCQAAgLAEAABAWAIAAICwBAAAQFgCAAAgLAEAABCWAAAAICwBAAAQlgAAAAhLAAAAhCUAAAAISwAAAIQlAAAAwhIAAABhCQAAAMISAAAAYQkAAICwBAAAQFgCAAAgLAEAAEBYAgAAICwBAAAQlgAAAAhLAAAAEJYAAAAISwAAAIQlAAAAwhIAAACEJQAAAMISAAAAYQkAAICwBAAAAGEJAACAsAQAAEBYAgAAICwBAAAQlgAAACAsAQAAEJYAAAAISwAAAIQlAAAACEsAAACEJQAAAMISAAAAYQkAAADCEgAAAGEJAACAsAQAAEBYAgAAgLAEAABAWAIAACAsAQAAEJYAAAAISwAAABCWAAAACEsAAACEJQAAAMISAAAAhCUAAADCEgAAAGEJAACAsAQAAABhCQAAgLAEAABAWAIAACAsAQAAQFgCAAAgLAEAABCWAAAACEsAAAAQlgAAAAhLAAAAhCUAAADCEgAAAGEJAAAAwhIAAABhCQAAgLAEAABAWAIAAICwBAAAQFgCAAAgLAEAABCWAAAAICwBAAAQlgAAAAhLAAAAhCUAAAAISwAAAIQlAAAAwhIAAABhCQAAgLAEAAAAYQkAAICwBAAAQFgCAAAgLAEAAEBYAgAAICwBAAAQlgAAAAhLAAAAEJYAAAAISwAAAIQlAAAAwhIAAACEJQAAAMISAAAAYQkAAICwBAAAQFgCAACAsAQAAEBYAgAAICwBAAAQlgAAACAsAQAAEJYAAAAISwAAAIQlAAAACEsAAACEJQAAAMISAAAAYQkAAADCEgAAAGEJAACAsAQAAEBYAgAAgLAEAABAWAIAACAsAQAAEJYAAAAISwAAABCWAAAACEsAAACEJQAAAMISAAAAhCUAAADCEgAAAGEJAACAsAQAAABhCQAAgLAEAABAWAIAACAsAQAAQFgCAAAgLAEAABCWAAAACEsAAACEJQAAAAhLAAAAhCUAAADCEgAAAGEJAAAAwhIAAABhCQAAgLAEAABAWAIAAICwBAAAQFgCAAAgLAEAABCWAAAAICwBAAAQlgAAAAhLAAAAhCUAAADCEgAAAIQlAAAAwhIAAABhCQAAgLAEAAAAYQkAAICwBAAAQFgCAAAgLAEAAEBYAgAAICwBAAAQlgAAAAhLAAAAEJYAAAAISwAAAIQlAAAAwhIAAACEJQAAAMISAAAAYQkAAICwBAAAQFgCAACAsAQAAEBYAgAAICwBAAAQlgAAACAsAQAAEJYAAAAISwAAAIQlAAAACEsAAACEJQAAAMISAAAAYQkAAADCEgAAAGEJAACAsAQAAEBYAgAAICwBAABAWAIAACAsAQAAEJYAAAAISwAAABCWAAAACEsAAACEJQAAAMISAAAAhCUAAADCEgAAAGEJAACAsAQAAABhCQAAgLAEAABAWAIAACAsAQAAEJYmAAAAQFgCAAAgLAEAABCWAAAACEsAAAAQlgAAAAhLAAAAhCUAAADCEgAAAIQlAAAAwhIAAABhCQAAgLAEAAAAYQkAAICwBAAAQFgCAAAgLAEAAEBYAgAAICwBAAAQlgAAAAhLAAAAhCUAAAAISwAAAIQlAAAAwhIAAABhCQAAAMISAAAAYQkAAICwBAAAQFgCAACAsAQAAEBYAgAAICwBAAAQlgAAACAsAQAAEJYAAAAISwAAAIQlAAAAwhIAAACEJQAAAMISAAAAYQkAAICwBAAAAGEJAACAsAQAAEBYAgAAICwBAABAWAIAACAsAQAAEJYAAAAISwAAABCWAAAACEsAAACEJQAAAMISAAAAhCUAAADCEgAAAGEJAACAsAQAAEBYAgAAgLAEAABAWAIAACAsAQAAEJYAAAAgLAEAABCWAAAACEsAAACEJQAAAAhLAAAAhCUAAADCEgAAAGEJAAAAwhIAAABhCQAAgLAEAABAWAIAACAsAQAAQFgCAAAgLAEAABCWAAAACEsAAAAQlgAAAAhLAAAAhCUAAADCEgAAAIQlAAAAwhIAAABhCQAAgLAEAAAAYQkAAICwBAAAQFgCAAAgLAEAABCWAAAAICwBAAAQlgAAAAhLAAAAhCUAAAAISwAAAIQlAAAAwhIAAABhCQAAAMISAAAAYQkAAICwBAAAQFgCAACAsAQAAEBYAgAAICwBAAAQlgAAACAsAQAAEJYAAAAISwAAAIQlAAAAwhIAAACEJcDZfh0SAAAAAAj6/9oTRphgEwAAYwkAAICxBAAAwFgCAACAsQQAAMBYAgAAYCwBAAAwlgAAAGAsAQAAMJYAAAAYSwAAAIwlAAAAGEsAAACMJQAAAMYSAAAAYwkAAICxBAAAAGMJAACAsQQAAMBYAgAAYCwBAADAWAIAAGAsAQAAMJYAAAAYSwAAADCWAAAAGEsAAACMJQAAAMYSAAAAjCUAAADGEgAAAGMJAACAsQQAAMBYAgAAgLEEAADAWAIAAGAsAQAAMJYAAABgLAEAADCWAAAAGEsAAACMJQAAABhLAAAAjCUAAADGEgAAAGMJAAAAxhIAAABjCQAAgLEEAADAWAIAAICxBAAAwFgCAABgLAEAADCWAAAAGEsAAAAwlgAAABhLAAAAjCUAAADGEgAAAIwlAAAAxhIAAABjCQAAgLEEAAAAYwkAAICxBAAAwFgCAABgLAEAAMBYAgAAYCwBAAAwlgAAABhLAAAAjCUAAAAYSwAAAIwlAAAAxhIAAABjCQAAAMYSAAAAYwkAAICxBAAAwFgCAACAsQQAAMBYAgAAYCwBAAAwlgAAAGAsAQAAMJYAAAAYSwAAAIwlAAAAxhIAAACMJQAAAMYSAAAAYwkAAICxBAAAAGMJAACAsQQAAMBYAgAAYCwBAADAWAIAAGAsAQAAMJYAAAAYSwAAADCWAAAAGEsAAACMJQAAAMYSAAAAjCUAAADGEgAAAGMJAACAsQQAAMBYAgAAgLEEAADAWAIAAGAsAQAAMJYAAABgLAEAADCWAAAAGEsAAACMJQAAABhLAAAAjCUAAADGEgAAAGMJAAAAxhIAAABjCQAAgLEEAADAWAIAAGAsAQAAwFgCAABgLAEAADCWAAAAGEsAAAAwlgAAABhLAAAAjCUAAADGEgAAAIwlAAAAxhIAAABjCQAAgLEEAAAAYwkAAICxBAAAwFgCAABgLAEAADCWEgAAAGAsAQAAMJYAAAAYSwAAAIwlAAAAGEsAAACMJQAAAMYSAAAAYwkAAADGEgAAAGMJAACAsQQAAMBYAgAAgLEEAADAWAIAAGAsAQAAMJYAAABgLAEAADCWAAAAGEsAAACMJQAAAMYSAAAAjCUAAADGEgAAAGMJAACAsQQAAABjCQAAgLEEAADAWAIAAGAsAQAAwFgCAABgLAEAADCWAAAAGEsAAAAwlgAAABhLAAAAjCUAAADGEgAAAGMJAAAAxhIAAABjCQAAgLEEAADAWAIAAICxBAAAwFgCAABgLAEAADCWAAAAYCwBAAAwlgAAABhLAAAAjCUAAAAYSwAAAIwlAAAAxhIAAABjCQAAAMYSAAAAYwkAAICxBAAAwFgCAABgLAEAAMBYAgAAYCwBAAAwlgAAABhLAAAAMJYAAAAYSwAAAIwlAAAAxhIAAACMJQAAAMYSAAAAYwkAAICxBAAAAGMJAACAsQQAAMBYAgAAYCwBAAAwlgAAAGAsAQAAMJYAAAAYSwAAAIwlAAAAGEsAAACMJQAAAMYSAAAAYwkAAADGEgAAAGMJAACAsQQAAMBYAgAAgLEEAADAWAIAAGAsAQAAMJYAAAAYSwAAADCWAAAAGEsAAACMJQAAAMYSAAAAjCUAAADGEgAAAGMJAACAsQQAAABjCQAAgLEEAADAWAIAAGAsAQAAwFgCAABgLAEAADCWAAAAGEsAAAAwlgAAABhLAAAAjCUAAADGEgAAAGMJAAAAxhIAAABjCQAAgLEEAADAWAIAAICxBAAAwFgCAABgLAEAADCWAAAAYCwBAAAwlgAAABhLAAAAjCUAAAAYSwAAAIwlAAAAxhIAAABjCQAAgLEEAAAAYwkAAICxBAAAwFgCAABgLAEAAMBYAgAAYCwBAAAwlgAAABhLAAAAMJYAAAAYSwAAAIwlAAAAxhIAAACMJQAAAMYSAAAAYwkAAICxBAAAwFgCAACAsQQAAMBYAgAAYCwBAAAwlgAAAGAsAQAAMJYAAAAYSwAAAIwlAAAAGEsAAACMJQAAAMYSAAAAYwkAAADGEgAAAGMJAACAsQQAAMBYAgAAgLEEAADAWAIAAGAsAQAAMJYAAAAYSwAAADCWAAAAGEsAAACMJQAAAMYSAAAAjCUAAADGEgAAAGMJAACAsQQAAABjCQAAgLEEAADAWAIAAGAsAQAAwFgCAABgLAEAADCWAAAAGEsAAACMJQAAABhLAAAAjCUAAADGEgAAAGMJAAAAxhIAAABjCQAAgLEEAADAWAIAAICxBAAAwFgCAABgLAEAADCWAAAAYCwBAAAwlgAAABhLAAAAjCUAAADGEgAAAIwlAAAAxhIAAABjCQAAgLEEAAAAYwkAAICxBAAAwFgCAABgLAEAAMBYAgAAYCwBAAAwlgAAABhLAAAAMJYAAAAYSwAAAIwlAAAAxhIAAACMJQAAAMYSAAAAYwkAAICxBAAAwFgCAACAsQQAAMBYAgAAYCwBAAAwlgAAAGAsAQAAMJYAAAAYSwAAAIwlAAAAGEsAAACMJQAAAMYSAAAAYwkAAADGEgAAAGMJAACAsQQAAMBYAgAAYCwBAADAWAIAAGAsAQAAMJYAAAAYSwAAADCWAAAAGEsAAACMJQAAAMYSAAAAjCUAAADGEgAAAGMJAACAsQQAAABjCQAAgLEEAADAWAIAAGAsAQAAMJYSAAAAYCwBAAAwlgAAABhLAAAAjCUAAAAYSwAAAIwlAAAAxhIAAABjCQAAAMYSAAAAYwkAAICxBAAAwFgCAACAsQQAAMBYAgAAYCwBAAAwlgAAAGAsAQAAMJYAAAAYSwAAAIwlAAAAxhIAAACMJQAAAMYSAAAAYwkAAICxBAAAAGMJAACAsQQAAMBYAgAAYCwBAADAWAIAAGAsAQAAMJYAAAAYSwAAADCWAAAAPALoTS03X+IEPAAAAABJRU5ErkJggg=="/><div class="t m0 xd ha y53 ff1 fs3 fc0 sc0 ls0 ws1d">5.1 Optimizations</div><div class="t m0 xd h3 y1c2 ff2 fs3 fc0 sc0 ls0 ws1a">Because traces are in SSA form<span class="_ _b"> </span>and hav<span class="_ _1"></span>e no join points or <span class="fff ws1">φ</span>-</div><div class="t m0 xd h3 y1c3 ff2 fs3 fc0 sc0 ls0 ws1a">nodes, certain optimizations are easy to implement. In order to</div><div class="t m0 xd h3 y1c4 ff2 fs3 fc0 sc0 ls0 ws2">get good<span class="_ _5"> </span>startup performance, the<span class="_ _5"> </span>optimizations must run<span class="_ _5"> </span>quickly<span class="_ _1"></span>,</div><div class="t m0 xd h3 y1c5 ff2 fs3 fc0 sc0 ls0 ws1a">so we chose a small set of optimizations. W<span class="_ _4"></span>e implemented the</div><div class="t m0 xd h3 y1c6 ff2 fs3 fc0 sc0 ls0 ws6">optimizations as pipelined ﬁlters so<span class="_ _5"> </span>that they can<span class="_ _3"> </span>be turned on and</div><div class="t m0 xd h3 y1c7 ff2 fs3 fc0 sc0 ls0 ws2">off independently<span class="_ _4"></span>, and yet all run in just two loop passes ov<span class="_ _1"></span>er the</div><div class="t m0 xd h3 y1c8 ff2 fs3 fc0 sc0 ls0 ws4">trace: one forward and one backward.</div><div class="t m0 x11 h3 y1c9 ff2 fs3 fc0 sc0 ls0 ws8">Every<span class="_ _7"> </span>time the<span class="_ _7"> </span>trace recorder<span class="_ _7"> </span>emits a<span class="_ _7"> </span>LIR instruction,<span class="_ _7"> </span>the in-</div><div class="t m0 xd h3 y4 ff2 fs3 fc0 sc0 ls0 ws13">struction is immediately passed to the ﬁrst ﬁlter in the forward</div><div class="t m0 xd h3 y1ca ff2 fs3 fc0 sc0 ls0 wsa">pipeline. Thus,<span class="_ _7"> </span>forward ﬁlter optimizations<span class="_ _7"> </span>are performed as<span class="_ _7"> </span>the</div><div class="t m0 xd h3 y1cb ff2 fs3 fc0 sc0 ls0 ws2">trace is<span class="_ _5"> </span>recorded. Each ﬁlter<span class="_ _5"> </span>may pass each instruction<span class="_ _5"> </span>to the ne<span class="_ _1"></span>xt</div><div class="t m0 xd h3 y1cc ff2 fs3 fc0 sc0 ls0 ws14">ﬁlter unchanged, write<span class="_ _7"> </span>a<span class="_ _7"> </span>dif<span class="_ _1"></span>ferent<span class="_ _7"> </span>instruction<span class="_ _6"> </span>to the next ﬁlter<span class="_ _1"></span>,<span class="_ _7"> </span>or</div><div class="t m0 xd h3 y19d ff2 fs3 fc0 sc0 ls0 ws2">write no instruction at all. For<span class="_ _6"> </span>example, the constant folding ﬁlter</div><div class="t m0 xd h4 y19e ff2 fs3 fc0 sc0 ls0 ws5">can replace<span class="_ _6"> </span>a multiply instruction<span class="_ _6"> </span>like <span class="fff ls10 ws1">v</span><span class="ff8 fs4 ws10 v2">13<span class="_ _a"> </span></span><span class="ff14 ws12">:=<span class="_ _7"> </span><span class="fff ws1">mul<span class="_ _2"></span><span class="ff14">3</span><span class="ls4 ws23">,<span class="_ _1"></span><span class="ff14 ls0 ws5">1000<span class="_ _6"> </span><span class="ff2">with a</span></span></span></span></span></div><div class="t m0 xd h4 y19f ff2 fs3 fc0 sc0 ls0 ws4">constant instruction <span class="fff ls10 ws1">v</span><span class="ff8 fs4 ws14 v2">13 </span><span class="ff14 ws2">= 3000</span>.</div><div class="t m0 x11 h3 y1a0 ff2 fs3 fc0 sc0 ls0 ws4">W<span class="_ _4"></span>e currently apply four forward ﬁlters:</div><div class="t m0 x14 h9 y65 ff3 fs2 fc0 sc0 ls5">•<span class="ff2 fs3 ls0 wsa v2">On ISAs<span class="_ _7"> </span>without ﬂoating-point instructions,<span class="_ _7"> </span>a soft-ﬂoat ﬁlter</span></div><div class="t m0 x15 h3 yfb ff2 fs3 fc0 sc0 ls0 ws4">con<span class="_ _1"></span>verts ﬂoating-point<span class="_ _3"> </span>LIR instructions to sequences of integer</div><div class="t m0 x15 h3 yfc ff2 fs3 fc0 sc0 ls0">instructions.</div><div class="t m0 x14 h9 y1cd ff3 fs2 fc0 sc0 ls5">•<span class="ff2 fs3 ls0 ws4 v2">CSE (constant subexpression elimination),</span></div><div class="t m0 x14 h9 yd3 ff3 fs2 fc0 sc0 ls5">•<span class="ff2 fs3 ls0 ws6 v2">expression simpliﬁcation,<span class="_ _3"> </span>including constant folding and a<span class="_ _3"> </span>few</span></div><div class="t m0 x15 h4 y1ce ff2 fs3 fc0 sc0 ls0 ws4">algebraic identities (e.g., <span class="fff ls6 ws32">a<span class="ff6">−</span><span class="ls12 ws34">a</span></span><span class="ff14 ws2">=<span class="_ _5"> </span>0</span>), and</div><div class="t m0 x14 h9 y1cf ff3 fs2 fc0 sc0 ls5">•<span class="ff2 fs3 ls0 ws16 v2">source language semantic-speciﬁc<span class="_ _a"> </span>expression simpliﬁcation,</span></div><div class="t m0 x15 h3 y1d0 ff2 fs3 fc0 sc0 ls0 ws4">primarily algebraic<span class="_ _3"> </span>identities<span class="_ _3"> </span>that allo<span class="_ _1"></span>w <span class="fse ws6">D<span class="_ _2"></span>OU<span class="_ _2"></span>B<span class="_ _2"></span>L<span class="_ _2"></span>E </span>to<span class="_ _3"> </span>be replaced</div><div class="t m0 x15 h3 y1d1 ff2 fs3 fc0 sc0 ls0 ws2">with <span class="fse ls1 ws1c">INT<span class="_ _1"></span><span class="fs3 ls0 ws2">.<span class="_ _5"> </span>For e<span class="_ _1"></span>xample,<span class="_ _6"> </span>LIR that<span class="_ _5"> </span>con<span class="_ _1"></span>verts<span class="_ _5"> </span>an <span class="fse ls1 ws7">INT </span>to a <span class="fse ws1">D<span class="_ _2"></span>OU<span class="_ _2"></span>B<span class="_ _2"></span>L<span class="_ _2"></span>E</span></span></span></div><div class="t m0 x15 h3 y1d2 ff2 fs3 fc0 sc0 ls0 ws4">and then back again would be remo<span class="_ _1"></span>ved by this ﬁlter<span class="_ _4"></span>.</div><div class="t m0 x11 h3 y1d3 ff2 fs3 fc0 sc0 ls0 ws5">When trace<span class="_ _6"> </span>recording is completed,<span class="_ _6"> </span>nanojit runs the<span class="_ _6"> </span>backward</div><div class="t m0 xd h3 y1d4 ff2 fs3 fc0 sc0 ls0 ws14">optimization ﬁlters. These are<span class="_ _7"> </span>used<span class="_ _7"> </span>for<span class="_ _6"> </span>optimizations that require</div><div class="t m0 xd h3 y1d5 ff2 fs3 fc0 sc0 ls0 ws12">backward program<span class="_ _b"> </span>analysis.<span class="_ _b"> </span>When running<span class="_ _b"> </span>the<span class="_ _b"> </span>backward<span class="_ _b"> </span>ﬁlters,</div><div class="t m0 xd h3 y1d6 ff2 fs3 fc0 sc0 ls0 wsd">nanojit reads one LIR instruction at<span class="_ _3"> </span>a<span class="_ _9"> </span>time, and the reads are passed</div><div class="t m0 xd h3 y1d7 ff2 fs3 fc0 sc0 ls0 ws4">through the pipeline.</div><div class="t m0 x11 h3 y1d8 ff2 fs3 fc0 sc0 ls0 ws4">W<span class="_ _4"></span>e currently apply three backward ﬁlters:</div><div class="t m0 x14 h9 y1d9 ff3 fs2 fc0 sc0 ls5">•<span class="ff2 fs3 ls0 wsd v2">Dead data-stack store elimination. The LIR trace encodes many</span></div><div class="t m0 x15 h3 ye2 ff2 fs3 fc0 sc0 ls0 ws2">stores to<span class="_ _5"> </span>locations in<span class="_ _5"> </span>the interpreter<span class="_ _5"> </span>stack. But<span class="_ _5"> </span>these v<span class="_ _1"></span>alues<span class="_ _5"> </span>are</div><div class="t m0 x15 h3 ye3 ff2 fs3 fc0 sc0 ls0 ws14">nev<span class="_ _1"></span>er read back<span class="_ _7"> </span>before<span class="_ _7"> </span>e<span class="_ _1"></span>xiting the<span class="_ _7"> </span>trace<span class="_ _7"> </span>(by<span class="_ _7"> </span>the<span class="_ _6"> </span>interpreter or</div><div class="t m0 x15 h3 ye4 ff2 fs3 fc0 sc0 ls0 ws13">another trace). Thus, stores to<span class="_ _b"> </span>the stack that are<span class="_ _b"> </span>ov<span class="_ _1"></span>erwritten</div><div class="t m0 x15 h3 ye5 ff2 fs3 fc0 sc0 ls0 wsa">before the<span class="_ _7"> </span>next e<span class="_ _1"></span>xit are<span class="_ _7"> </span>dead. Stores to<span class="_ _7"> </span>locations that are of<span class="_ _1"></span>f</div><div class="t m0 x15 h3 y1da ff2 fs3 fc0 sc0 ls0 ws4">the top of the interpreter stack at future exits are also dead.</div><div class="t m0 x14 h9 y1db ff3 fs2 fc0 sc0 ls5">•<span class="ff2 fs3 ls0 wsd v2">Dead call-stack store elimination. This is the same optimization</span></div><div class="t m0 x15 h3 y1dc ff2 fs3 fc0 sc0 ls0 ws2">as abo<span class="_ _1"></span>ve,<span class="_ _6"> </span>except applied<span class="_ _5"> </span>to the interpreter’<span class="_ _1"></span>s<span class="_ _5"> </span>call stack used<span class="_ _5"> </span>for</div><div class="t m0 x15 h3 y1dd ff2 fs3 fc0 sc0 ls0 ws4">function call inlining.</div><div class="t m0 x14 h9 y40 ff3 fs2 fc0 sc0 ls5">•<span class="ff2 fs3 ls0 ws37 v2">Dead code elimination. This eliminates any operation that</span></div><div class="t m0 x15 h3 y20 ff2 fs3 fc0 sc0 ls0 ws4">stores to a value that is ne<span class="_ _1"></span>v<span class="_ _1"></span>er used.</div><div class="t m0 x11 h3 y1bb ff2 fs3 fc0 sc0 ls0 ws10">After a LIR<span class="_ _a"> </span>instruction<span class="_ _b"> </span>is successfully read (“pulled”)<span class="_ _a"> </span>from</div><div class="t m0 xd h3 y1de ff2 fs3 fc0 sc0 ls0 ws5">the backward<span class="_ _6"> </span>ﬁlter pipeline, nanojit’<span class="_ _1"></span>s<span class="_ _6"> </span>code generator emits<span class="_ _6"> </span>native</div><div class="t m0 xd h3 y1bc ff2 fs3 fc0 sc0 ls0 ws4">machine instruction(s) for it.</div><div class="t m0 xd ha yee ff1 fs3 fc0 sc0 ls0 ws4">5.2<span class="_ _8"> </span>Register Allocation</div><div class="t m0 xd h3 y1df ff2 fs3 fc0 sc0 ls0 ws0">W<span class="_ _4"></span>e use a<span class="_ _a"> </span>simple greedy<span class="_ _a"> </span>register<span class="_ _a"> </span>allocator that<span class="_ _a"> </span>makes a<span class="_ _a"> </span>single</div><div class="t m0 xd h3 y88 ff2 fs3 fc0 sc0 ls0 ws8">backward pass<span class="_ _7"> </span>o<span class="_ _1"></span>ver<span class="_ _7"> </span>the trace<span class="_ _7"> </span>(it is<span class="_ _7"> </span>integrated<span class="_ _7"> </span>with the<span class="_ _7"> </span>code gen-</div><div class="t m0 xd h3 y89 ff2 fs3 fc0 sc0 ls0 ws8">erator). By the time the allocator<span class="_ _7"> </span>has reached an instruction lik<span class="_ _1"></span>e</div><div class="t m0 xd h4 y8a fff fs3 fc0 sc0 ls10 ws1">v<span class="ff8 fs4 ls5 ws36 v2">3</span><span class="ff14 ls7 ws1e">=<span class="_ _1"></span><span class="fff ls0 ws6">add v<span class="ff8 fs4 ls1 ws1c v2">1</span><span class="ws7">,<span class="_ _9"> </span>v<span class="ff8 fs4 ls1 ws1c v2">2</span></span><span class="ff2">, it has already assigned a re<span class="_ _1"></span>gister to <span class="fff ls10 ws1">v<span class="ff8 fs4 ls1 ws1c v2">3</span></span>. If <span class="fff ls10 ws1">v<span class="ff8 fs4 ls7 ws1e v2">1<span class="_ _1"></span><span class="ff2 fs3 ls0 v5">and</span></span></span></span></span></span></div><div class="t m0 xd h3 y8b fff fs3 fc0 sc0 ls10 ws1">v<span class="ff8 fs4 ls13 ws35 v2">2</span><span class="ff2 ls0 ws6">ha<span class="_ _1"></span>ve<span class="_ _3"> </span>not yet been<span class="_ _3"> </span>assigned registers,<span class="_ _3"> </span>the allocator<span class="_ _5"> </span>assigns a<span class="_ _3"> </span>free</span></div><div class="t m0 xd h3 y8c ff2 fs3 fc0 sc0 ls0 ws4">register to<span class="_ _3"> </span>each. If there<span class="_ _3"> </span>are no free<span class="_ _3"> </span>registers, a<span class="_ _3"> </span>value<span class="_ _3"> </span>is selected for</div><div class="t m0 xd h3 y8d ff2 fs3 fc0 sc0 ls0 ws2">spilling. W<span class="_ _4"></span>e use a class heuristic<span class="_ _6"> </span>that selects the “oldest” re<span class="_ _1"></span>gister<span class="_ _1"></span>-</div><div class="t m0 xd h3 y8e ff2 fs3 fc0 sc0 ls0 ws4">carried value (6).</div><div class="t m0 x11 h3 y8f ff2 fs3 fc0 sc0 ls0 ws6">The heuristic<span class="_ _3"> </span>considers the<span class="_ _3"> </span>set <span class="fff lsa ws22">R</span>of v<span class="_ _1"></span>alues<span class="_ _3"> </span><span class="fff ls12 ws34">v</span>in re<span class="_ _1"></span>gisters imme-</div><div class="t m0 xd h3 y90 ff2 fs3 fc0 sc0 ls0 ws2">diately after<span class="_ _6"> </span>the current<span class="_ _6"> </span>instruction for<span class="_ _6"> </span>spilling. Let<span class="_ _6"> </span><span class="fff ls10 ws1">v<span class="ff10 fs4 ls7 ws1e v2">m</span></span>be the<span class="_ _5"> </span>last</div><div class="t m0 xd h3 y91 ff2 fs3 fc0 sc0 ls0 ws6">instruction before<span class="_ _3"> </span>the current where<span class="_ _5"> </span>each <span class="fff ls12 ws34">v</span>is<span class="_ _3"> </span>referred to. Then<span class="_ _3"> </span>the</div><div class="t m0 x4c h3 y1e0 ff2 fs3 fc0 sc0 ls0 ws4">T<span class="_ _4"></span>ag<span class="_ _1e"> </span>JS T<span class="_ _4"></span>ype<span class="_ _1f"> </span>Description</div><div class="t m0 x4c h3 y1e1 ff2 fs3 fc0 sc0 ls0 ws4">xx1<span class="_ _1e"> </span>number<span class="_ _20"> </span>31-bit integer representation</div><div class="t m0 x4c h3 y1e2 ff2 fs3 fc0 sc0 ls0 ws4">000<span class="_ _1e"> </span>object<span class="_ _21"> </span>pointer to JSObject handle</div><div class="t m0 x4c h3 y1e3 ff2 fs3 fc0 sc0 ls0 ws4">010<span class="_ _1e"> </span>number<span class="_ _20"> </span>pointer to double handle</div><div class="t m0 x4c h3 y1e4 ff2 fs3 fc0 sc0 ls0 ws4">100<span class="_ _1e"> </span>string<span class="_ _22"> </span>pointer to JSString handle</div><div class="t m0 x4c h3 y1e5 ff2 fs3 fc0 sc0 ls0 ws4">110<span class="_ _1e"> </span>boolean<span class="_ _1f"> </span>enumeration<span class="_ _3"> </span>for null, undeﬁned, true, f<span class="_ _1"></span>alse</div><div class="t m0 x4d h3 y1e6 ff2 fs3 fc0 sc0 ls0 ws4">null, or</div><div class="t m0 x4d h3 y1e7 ff2 fs3 fc0 sc0 ls0">undeﬁned</div><div class="t m0 xf ha y1e8 ff1 fs3 fc0 sc0 ls0 ws8">Figure<span class="_ _7"> </span>9.<span class="_ _a"> </span>T<span class="_ _1"></span>agged<span class="_ _7"> </span>v<span class="_ _1"></span>alues<span class="_ _7"> </span>in the<span class="_ _7"> </span>SpiderMonkey<span class="_ _7"> </span>JS<span class="_ _7"> </span>interpr<span class="_ _1"></span>eter<span class="_ _4"></span>.</div><div class="t m0 xf h3 y1e9 ff2 fs3 fc0 sc0 ls0 ws6">T<span class="_ _4"></span>esting tags, unboxing (extracting the untagged value) and boxing</div><div class="t m0 xf h3 y1ea ff2 fs3 fc0 sc0 ls0 ws20">(creating tagged values)<span class="_ _5"> </span>are signiﬁcant costs. A<span class="_ _4"></span>voiding these costs</div><div class="t m0 xf h3 y1eb ff2 fs3 fc0 sc0 ls0 ws4">is a key beneﬁt of tracing.</div><div class="t m0 xf h3 y19f ff2 fs3 fc0 sc0 ls0 ws14">heuristic selects <span class="fff ls5 ws36">v<span class="_ _1"></span><span class="ff2 ls0 ws14">with minimum <span class="fff ls10 ws1">v<span class="ff10 fs4 ls1 ws1c v2">m</span></span>.<span class="_ _7"> </span>The<span class="_ _7"> </span>moti<span class="_ _1"></span>v<span class="_ _1"></span>ation<span class="_ _7"> </span>is<span class="_ _6"> </span>that this</span></span></div><div class="t m0 xf h3 y1a0 ff2 fs3 fc0 sc0 ls0 ws4">frees up a register for as long as possible gi<span class="_ _1"></span>ven a single spill.</div><div class="t m0 x10 h3 y1ec ff2 fs3 fc0 sc0 ls0 ws12">If we need to spill a v<span class="_ _1"></span>alue <span class="fff ls10 ws1">v<span class="ff10 fs4 ls15 v2">s</span></span>at this point, we generate the</div><div class="t m0 xf h3 y1ed ff2 fs3 fc0 sc0 ls0 ws10">restore code<span class="_ _b"> </span>just after<span class="_ _b"> </span>the code<span class="_ _a"> </span>for<span class="_ _b"> </span>the current<span class="_ _b"> </span>instruction. The</div><div class="t m0 xf h3 y1ee ff2 fs3 fc0 sc0 ls0 ws4">corresponding spill code<span class="_ _3"> </span>is generated just<span class="_ _3"> </span>after the last<span class="_ _3"> </span>point where</div><div class="t m0 xf h3 y1ef fff fs3 fc0 sc0 ls10 ws1">v<span class="ff10 fs4 ls12 ws34 v2">s</span><span class="ff2 ls0 ws4">w<span class="_ _1"></span>as used.<span class="_ _3"> </span>The<span class="_ _3"> </span>register<span class="_ _3"> </span>that w<span class="_ _1"></span>as assigned<span class="_ _3"> </span>to<span class="_ _3"> </span><span class="fff ls10 ws1">v<span class="ff10 fs4 ls12 ws34 v2">s</span></span>is<span class="_ _3"> </span>marked<span class="_ _3"> </span>free<span class="_ _3"> </span>for</span></div><div class="t m0 xf h3 y1f0 ff2 fs3 fc0 sc0 ls0 ws8">the preceding<span class="_ _7"> </span>code,<span class="_ _7"> </span>because<span class="_ _7"> </span>that re<span class="_ _1"></span>gister<span class="_ _7"> </span>can<span class="_ _7"> </span>now<span class="_ _7"> </span>be<span class="_ _7"> </span>used<span class="_ _7"> </span>freely</div><div class="t m0 xf h3 y1f1 ff2 fs3 fc0 sc0 ls0 ws4">without affecting the follo<span class="_ _1"></span>wing code</div><div class="t m0 xf h6 y1f2 ff1 fs1 fc0 sc0 ls0 wsc">6. Implementation</div><div class="t m0 xf h3 y1f3 ff2 fs3 fc0 sc0 ls0 ws1a">T<span class="_ _4"></span>o demonstrate the effecti<span class="_ _1"></span>veness<span class="_ _b"> </span>of our approach, we hav<span class="_ _1"></span>e im-</div><div class="t m0 xf h3 y1f4 ff2 fs3 fc0 sc0 ls0 ws5">plemented a<span class="_ _6"> </span>trace-based dynamic compiler for<span class="_ _6"> </span>the SpiderMonkey</div><div class="t m0 xf h3 y1f5 ff2 fs3 fc0 sc0 ls0 ws13">Jav<span class="_ _1"></span>aScript V<span class="_ _4"></span>irtual Machine (4). SpiderMonkey<span class="_ _b"> </span>is the Ja<span class="_ _1"></span>v<span class="_ _1"></span>aScript</div><div class="t m0 xf h3 y1f6 ff2 fs3 fc0 sc0 ls0 ws2">VM embedded<span class="_ _5"> </span>in Mozilla’<span class="_ _1"></span>s<span class="_ _5"> </span>Firefox open-source<span class="_ _6"> </span>web bro<span class="_ _1"></span>wser<span class="_ _5"> </span>(2),</div><div class="t m0 xf h3 y1f7 ff2 fs3 fc0 sc0 ls0 wsd">which is used by more than<span class="_ _3"> </span>200<span class="_ _3"> </span>million<span class="_ _9"> </span>users world-wide. The core</div><div class="t m0 xf h3 y1f8 ff2 fs3 fc0 sc0 ls0 ws4">of SpiderMonkey is a bytecode interpreter implemented in C++.</div><div class="t m0 x10 h3 y1f9 ff2 fs3 fc0 sc0 ls0 ws14">In SpiderMonke<span class="_ _1"></span>y<span class="_ _1"></span>,<span class="_ _6"> </span>all Jav<span class="_ _1"></span>aScript v<span class="_ _1"></span>alues are represented<span class="_ _7"> </span>by<span class="_ _7"> </span>the</div><div class="t m0 xf h3 y1fa ff2 fs3 fc0 sc0 ls0 ws6">type <span class="ff7 ws1">jsval</span>. A <span class="ff7">jsval </span>is machine word in which up to the 3 of the</div><div class="t m0 xf h3 y1fb ff2 fs3 fc0 sc0 ls0 ws6">least signiﬁcant<span class="_ _3"> </span>bits are a<span class="_ _3"> </span>type tag, and<span class="_ _3"> </span>the remaining bits<span class="_ _3"> </span>are data.</div><div class="t m0 xf h3 y1fc ff2 fs3 fc0 sc0 ls0 ws6">See Figure 6 for<span class="_ _3"> </span>details. All pointers contained in <span class="ff7">jsvals </span>point<span class="_ _3"> </span>to</div><div class="t m0 xf h3 y1fd ff2 fs3 fc0 sc0 ls0 ws4">GC-controlled blocks aligned on 8-byte boundaries.</div><div class="t m0 x10 h3 y1fe ff2 fs3 fc0 sc0 ls0 ws4">Jav<span class="_ _1"></span>aScript<span class="_ _3"> </span><span class="ffa ws6">object </span>v<span class="_ _1"></span>alues<span class="_ _3"> </span>are mappings<span class="_ _3"> </span>of string-v<span class="_ _1"></span>alued property</div><div class="t m0 xf h3 y1ff ff2 fs3 fc0 sc0 ls0 ws4">names to arbitrary v<span class="_ _1"></span>alues.<span class="_ _3"> </span>They are<span class="_ _3"> </span>represented in one of<span class="_ _3"> </span>two w<span class="_ _1"></span>ays</div><div class="t m0 xf h3 y200 ff2 fs3 fc0 sc0 ls0 ws2">in SpiderMonkey<span class="_ _4"></span>. Most objects are represented by a shared struc-</div><div class="t m0 xf h3 y201 ff2 fs3 fc0 sc0 ls0 wsd">tural description, called the <span class="ffa">object shape</span>, that<span class="_ _3"> </span>maps<span class="_ _3"> </span>property<span class="_ _3"> </span>names</div><div class="t m0 xf h3 y202 ff2 fs3 fc0 sc0 ls0 ws5">to array inde<span class="_ _1"></span>xes<span class="_ _6"> </span>using a hash table.<span class="_ _6"> </span>The object stores a<span class="_ _6"> </span>pointer to</div><div class="t m0 xf h3 y203 ff2 fs3 fc0 sc0 ls0 ws8">the shape<span class="_ _7"> </span>and the<span class="_ _7"> </span>array of<span class="_ _7"> </span>its o<span class="_ _1"></span>wn property<span class="_ _7"> </span>v<span class="_ _1"></span>alues. Objects<span class="_ _7"> </span>with</div><div class="t m0 xf h3 y204 ff2 fs3 fc0 sc0 ls0 ws2">large,<span class="_ _5"> </span>unique sets of property<span class="_ _5"> </span>names store their properties<span class="_ _5"> </span>directly</div><div class="t m0 xf h3 y205 ff2 fs3 fc0 sc0 ls0 ws4">in a hash table.</div><div class="t m0 x10 h3 y206 ff2 fs3 fc0 sc0 ls0 ws8">The garbage collector is<span class="_ _7"> </span>an exact,<span class="_ _7"> </span>non-generational, stop-the-</div><div class="t m0 xf h3 y207 ff2 fs3 fc0 sc0 ls0 ws4">world mark-and-sweep collector<span class="_ _1"></span>.</div><div class="t m0 x10 h3 y208 ff2 fs3 fc0 sc0 ls0 ws4">In the<span class="_ _3"> </span>rest<span class="_ _3"> </span>of<span class="_ _3"> </span>this<span class="_ _3"> </span>section<span class="_ _3"> </span>we discuss<span class="_ _3"> </span>ke<span class="_ _1"></span>y<span class="_ _3"> </span>areas<span class="_ _3"> </span>of the<span class="_ _3"> </span>T<span class="_ _1"></span>raceMon-</div><div class="t m0 xf h3 y209 ff2 fs3 fc0 sc0 ls0 ws4">key implementation.</div><div class="t m0 xf ha yeb ff1 fs3 fc0 sc0 ls0 ws4">6.1<span class="_ _8"> </span>Calling Compiled T<span class="_ _4"></span>races</div><div class="t m0 xf h3 y116 ff2 fs3 fc0 sc0 ls0 ws2">Compiled traces are<span class="_ _5"> </span>stored in a <span class="ffa">tr<span class="_ _1"></span>ace cac<span class="_ _1"></span>he<span class="ff2">, index<span class="_ _1"></span>ed by<span class="_ _5"> </span>intepreter</span></span></div><div class="t m0 xf h3 yc4 ff2 fs3 fc0 sc0 ls0 ws37">PC and type map. T<span class="_ _1"></span>races are compiled<span class="_ _e"> </span>so that they may<span class="_ _e"> </span>be</div><div class="t m0 xf h3 yc5 ff2 fs3 fc0 sc0 ls0 ws2">called as<span class="_ _5"> </span>functions using<span class="_ _5"> </span>standard nati<span class="_ _1"></span>ve<span class="_ _5"> </span>calling con<span class="_ _1"></span>v<span class="_ _1"></span>entions<span class="_ _5"> </span>(e.g.,</div><div class="t m0 xf h3 y1df ff7 fs3 fc0 sc0 ls0 ws4">FASTCALL <span class="ff2">on x86).</span></div><div class="t m0 x10 h3 y88 ff2 fs3 fc0 sc0 ls0 ws8">The interpreter<span class="_ _7"> </span>must<span class="_ _7"> </span>hit a<span class="_ _7"> </span>loop<span class="_ _7"> </span>edge<span class="_ _7"> </span>and enter<span class="_ _7"> </span>the<span class="_ _7"> </span>monitor in</div><div class="t m0 xf h3 y89 ff2 fs3 fc0 sc0 ls0 ws6">order to<span class="_ _3"> </span>call a<span class="_ _3"> </span>native<span class="_ _3"> </span>trace for<span class="_ _3"> </span>the ﬁrst time.<span class="_ _3"> </span>The monitor<span class="_ _3"> </span>computes</div><div class="t m0 xf h3 y8a ff2 fs3 fc0 sc0 ls0 ws12">the current type<span class="_ _b"> </span>map, checks<span class="_ _b"> </span>the<span class="_ _b"> </span>trace cache<span class="_ _b"> </span>for<span class="_ _b"> </span>a trace<span class="_ _b"> </span>for<span class="_ _b"> </span>the</div><div class="t m0 xf h3 y8b ff2 fs3 fc0 sc0 ls0 ws4">current PC and type map, and if it ﬁnds one, ex<span class="_ _1"></span>ecutes the trace.</div><div class="t m0 x10 h3 y8c ff2 fs3 fc0 sc0 ls0 ws12">T<span class="_ _4"></span>o execute<span class="_ _b"> </span>a<span class="_ _b"> </span>trace,<span class="_ _b"> </span>the<span class="_ _b"> </span>monitor must<span class="_ _7"> </span>build a trace<span class="_ _b"> </span>acti<span class="_ _1"></span>v<span class="_ _1"></span>ation</div><div class="t m0 xf h3 y8d ff2 fs3 fc0 sc0 ls0 ws8">record containing<span class="_ _7"> </span>imported<span class="_ _7"> </span>local<span class="_ _7"> </span>and<span class="_ _7"> </span>global<span class="_ _7"> </span>v<span class="_ _1"></span>ariables, temporary</div><div class="t m0 xf h3 y8e ff2 fs3 fc0 sc0 ls0 ws6">stack space, and space for<span class="_ _3"> </span>arguments to nati<span class="_ _1"></span>ve calls.<span class="_ _5"> </span>The local and</div><div class="t m0 xf h3 y8f ff2 fs3 fc0 sc0 ls0 ws6">global v<span class="_ _1"></span>alues are then<span class="_ _3"> </span>copied from the interpreter state to<span class="_ _3"> </span>the trace</div><div class="t m0 xf h3 y90 ff2 fs3 fc0 sc0 ls0 ws4">activ<span class="_ _1"></span>ation record.<span class="_ _3"> </span>Then, the trace is called<span class="_ _3"> </span>like a normal<span class="_ _3"> </span>C function</div><div class="t m0 xf h3 y91 ff2 fs3 fc0 sc0 ls0 ws1">pointer<span class="_ _1"></span>.</div></div><div class="pi" data-data='{"ctm":[1.673203,0.000000,0.000000,1.673203,0.000000,0.000000]}'></div></div></div>
